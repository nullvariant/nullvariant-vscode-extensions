# Git ID Switcher

<table>
  <tr>
    <td align="center" valign="top" width="150">
      <img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/icon.png" width="128" alt="Git ID Switcher">
    </td>
    <td>
      Wechseln Sie mit einem Klick zwischen mehreren Git-Profilen. Verwalten Sie mehrere GitHub-Konten, SSH-SchlÃ¼ssel, GPG-Signierung und <b>wenden Sie Profile automatisch auf Git-Submodule an</b>.
      <br><br>
      <a href="https://marketplace.visualstudio.com/items?itemName=nullvariant.git-id-switcher"><img src="https://img.shields.io/visual-studio-marketplace/v/nullvariant.git-id-switcher" alt="VS Code Marketplace"></a>
      <a href="https://open-vsx.org/extension/nullvariant/git-id-switcher"><img src="https://img.shields.io/open-vsx/v/nullvariant/git-id-switcher" alt="Open VSX Registry"></a>
      <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
      <a href="https://securityscorecards.dev/viewer/?uri=github.com/nullvariant/nullvariant-vscode-extensions"><img src="https://api.securityscorecards.dev/projects/github.com/nullvariant/nullvariant-vscode-extensions/badge" alt="OpenSSF Scorecard"></a>
      <a href="https://www.bestpractices.dev/projects/11709"><img src="https://www.bestpractices.dev/projects/11709/badge" alt="OpenSSF Best Practices"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/attestations"><img src="https://img.shields.io/badge/SLSA-Level_3-green" alt="SLSA 3"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml/badge.svg" alt="Security"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml/badge.svg" alt="CI"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://img.shields.io/badge/%20-Win%20%7C%20Mac%20%7C%20Linux-blue?labelColor=555&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0yMSAySDNjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoN3YySDh2Mmg4di0yaC0ydi0yaDdjMS4xIDAgMi0uOSAyLTJWNGMwLTEuMS0uOS0yLTItMnptMCAxNEgzVjRoMTh2MTJ6Ii8+PC9zdmc+" alt="Platform"></a>
      <a href="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions"><img src="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions/graph/badge.svg" alt="codecov"></a>
      <a href="https://sonarcloud.io/summary/new_code?id=nullvariant_nullvariant-vscode-extensions"><img src="https://sonarcloud.io/api/project_badges/measure?project=nullvariant_nullvariant-vscode-extensions&metric=alert_status" alt="Quality Gate Status"></a>
      <a href="https://github.com/step-security/harden-runner"><img src="https://img.shields.io/badge/Harden--Runner-enabled-7037F5" alt="Harden-Runner"></a>
      <a href="../../DESIGN_PHILOSOPHY.md"><img src="https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568" alt="Karesansui Architecture"></a>
      <br>
      <a href="../../LANGUAGES.md"><img src="https://img.shields.io/badge/ğŸŒ_Languages-17+9_more-blue" alt="26 Languages"></a> <a href="../en/README.md">ğŸ‡ºğŸ‡¸</a> <a href="../ja/README.md">ğŸ‡¯ğŸ‡µ</a> <a href="../zh-CN/README.md">ğŸ‡¨ğŸ‡³</a> <a href="../zh-TW/README.md">ğŸ‡¹ğŸ‡¼</a> <a href="../ko/README.md">ğŸ‡°ğŸ‡·</a> <b>ğŸ‡©ğŸ‡ª</b> <a href="../fr/README.md">ğŸ‡«ğŸ‡·</a> <a href="../es/README.md">ğŸ‡ªğŸ‡¸</a> <a href="../pt-BR/README.md">ğŸ‡§ğŸ‡·</a> <a href="../it/README.md">ğŸ‡®ğŸ‡¹</a> <a href="../ru/README.md">ğŸ‡·ğŸ‡º</a> <a href="../pl/README.md">ğŸ‡µğŸ‡±</a> <a href="../tr/README.md">ğŸ‡¹ğŸ‡·</a> <a href="../cs/README.md">ğŸ‡¨ğŸ‡¿</a> <a href="../hu/README.md">ğŸ‡­ğŸ‡º</a> <a href="../bg/README.md">ğŸ‡§ğŸ‡¬</a> <a href="../uk/README.md">ğŸ‡ºğŸ‡¦</a> <a href="../eo/README.md">ğŸŒ</a> <a href="../haw/README.md">ğŸŒº</a> <a href="../ain/README.md">ğŸ»</a> <a href="../ryu/README.md">ğŸ‰</a> <a href="../tok/README.md">âœ¨</a> <a href="../tlh/README.md">ğŸ––</a> <a href="../x-lolcat/README.md">ğŸ±</a> <a href="../x-pirate/README.md">ğŸ´â€â˜ ï¸</a> <a href="../x-shakespeare/README.md">ğŸ­</a>
    </td>
  </tr>
</table>

<br>

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/de/demo.webp" width="600" alt="Demo" loading="lazy">

## ğŸ¯ Warum Git ID Switcher?

Es gibt viele Tools zum Wechseln von Git-Profilen, aber **Git ID Switcher** lÃ¶st komplexe Probleme, die andere oft Ã¼bersehen:

1. **Das Submodul-Problem**: Bei der Arbeit mit Repositories mit Submodulen (z. B. Hugo-Themes, Vendor-Bibliotheken) mÃ¼ssen Sie normalerweise `git config user.name` fÃ¼r _jedes_ Submodul manuell setzen. Diese Erweiterung lÃ¶st das elegant, indem sie Ihr Profil rekursiv auf alle aktiven Submodule anwendet.
2. **SSH- und GPG-Handling**: Es Ã¤ndert nicht nur Ihren Namen â€” es tauscht SSH-SchlÃ¼ssel im ssh-agent aus und konfiguriert die GPG-Signierung, damit Sie nie mit der falschen Signatur committen.

## Funktionen

- **Profilverwaltungs-UI**: Profile hinzufÃ¼gen, bearbeiten, lÃ¶schen und umordnen â€” ohne settings.json zu bearbeiten
- **Ein-Klick-Profilwechsel**: Git user.name und user.email sofort Ã¤ndern
- **Statusleisten-Integration**: Aktuelles Profil immer auf einen Blick sehen
- **Submodul-UnterstÃ¼tzung**: Profil automatisch auf Git-Submodule Ã¼bertragen
- **SSH-SchlÃ¼sselverwaltung**: SSH-SchlÃ¼ssel im ssh-agent automatisch wechseln
- **GPG-SignierungsunterstÃ¼tzung**: GPG-SchlÃ¼ssel fÃ¼r Commit-Signierung konfigurieren (optional)
- **Reichhaltige Tooltips**: Detaillierte Profilinformationen mit Beschreibung und SSH-Host
- **PlattformÃ¼bergreifend**: Funktioniert auf macOS, Linux und Windows
- **Mehrsprachig**: UnterstÃ¼tzt 17 Sprachen

## ğŸŒ Ein Wort zur Mehrsprachigkeit

> **Ich schÃ¤tze die Existenz von Minderheiten.**
> Ich mÃ¶chte sie nicht verwerfen, nur weil sie zahlenmÃ¤ÃŸig klein sind.
> Auch wenn Ãœbersetzungen nicht perfekt sein mÃ¶gen, hoffe ich, dass Sie unsere Absicht spÃ¼ren, Minderheitensprachen zu verstehen und zu respektieren.

Diese Erweiterung unterstÃ¼tzt alle 17 Sprachen, die VS Code unterstÃ¼tzt. DarÃ¼ber hinaus versuchen wir bei der README-Dokumentation, auch in Minderheitensprachen und sogar Scherzsprachen zu Ã¼bersetzen.

Das ist nicht nur â€globale UnterstÃ¼tzung" â€” es ist â€Respekt fÃ¼r sprachliche Vielfalt". Und ich wÃ¼rde mich freuen, wenn dies zur Infrastruktur wird, Ã¼ber die Entwickler auf der ganzen Welt, Sprachbarrieren Ã¼berwindend, Commits senden, die die Welt verbessern.

---

## Schnellstart

Ein typisches Setup fÃ¼r die Verwendung von persÃ¶nlichem Konto und Firmenkonto (Enterprise Managed User).

### Schritt 1: SSH-SchlÃ¼ssel vorbereiten

Erstellen Sie zunÃ¤chst SSH-SchlÃ¼ssel fÃ¼r jedes Konto (Ã¼berspringen Sie dies, wenn Sie bereits welche haben):

```bash
# PersÃ¶nlich
ssh-keygen -t ed25519 -C "alex@personal.example.com" -f ~/.ssh/id_ed25519_personal

# Arbeit
ssh-keygen -t ed25519 -C "alex.mueller@techcorp.example.com" -f ~/.ssh/id_ed25519_work
```

Registrieren Sie den **Ã¶ffentlichen SchlÃ¼ssel** (`.pub`-Datei) jedes SSH-SchlÃ¼ssels beim entsprechenden GitHub-Konto.

> **Hinweis**: Bei GitHub registrieren Sie `id_ed25519_personal.pub` (Ã¶ffentlicher SchlÃ¼ssel). `id_ed25519_personal` (ohne Erweiterung) ist der private SchlÃ¼ssel â€” teilen Sie ihn niemals mit anderen und laden Sie ihn nirgendwo hoch.

### Schritt 2: SSH konfigurieren

Bearbeiten Sie `~/.ssh/config`:

```ssh-config
# PersÃ¶nliches GitHub-Konto (Standard)
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Arbeits-GitHub-Konto
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes
```

### Schritt 3: Erweiterung konfigurieren

Direkt nach der Installation stehen Beispielprofile bereit.
Folgen Sie der Anleitung unten, um diese fÃ¼r Ihren Gebrauch zu bearbeiten.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/de/first-ux.webp" width="600" alt="Ersteinrichtung: Profilverwaltung Ã¼ber die Statusleiste Ã¶ffnen, dann bearbeiten und neue Profile erstellen" loading="lazy">

> **SchlÃ¼sseldateien werden nicht gesendet**: Beim Festlegen von SSH-SchlÃ¼sselpfaden wird nur der Dateipfad (Speicherort) gespeichert. Der Inhalt der SchlÃ¼sseldatei wird niemals hochgeladen oder extern Ã¼bertragen.

> **Bei Verwendung von GPG-Signierung**: Sie kÃ¶nnen auch `gpgKeyId` im Profilbearbeitungsbildschirm festlegen.
> Wie Sie Ihre GPG-SchlÃ¼ssel-ID finden, erfahren Sie unter â€[Fehlerbehebung](#gpg-signierung-funktioniert-nicht)".

> **Hinweis**: Sie kÃ¶nnen auch direkt Ã¼ber settings.json konfigurieren.
> Ã–ffnen Sie die Erweiterungseinstellungen (`Cmd+,` / `Strg+,`) â†’ suchen Sie â€Git ID Switcher" â†’ klicken Sie auf â€In settings.json bearbeiten".
> JSON-Konfigurationsbeispiele finden Sie unter â€[VollstÃ¤ndiges Beispiel](#vollstÃ¤ndiges-beispiel-5-konten-mit-ssh--gpg)".

---

## VollstÃ¤ndiges Beispiel: 5 Konten mit SSH + GPG

Ein vollstÃ¤ndiges Beispiel, das alles kombiniert:

### SSH-Konfiguration (`~/.ssh/config`)

```ssh-config
# PersÃ¶nliches Konto (Standard)
Host github-personal
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Arbeitskonto (vom Unternehmen ausgestellter Enterprise Managed User)
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes

# Kunde A â€“ Auftragsprojekt (Bitbucket)
Host bitbucket-clienta
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_clienta
    IdentitiesOnly yes

# Kunde B â€“ Vor-Ort-Projekt (Bitbucket)
Host bitbucket-clientb
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_clientb
    IdentitiesOnly yes

# OSS-BeitrÃ¤ge (GitLab)
Host gitlab-oss
    HostName gitlab.com
    User git
    IdentityFile ~/.ssh/id_ed25519_oss
    IdentitiesOnly yes
```

### Erweiterungseinstellungen

```json
{
  "gitIdSwitcher.identities": [
    {
      "id": "personal",
      "name": "Alex MÃ¼ller",
      "email": "alex@personal.example.com",
      "service": "GitHub",
      "icon": "ğŸ ",
      "description": "PersÃ¶nliche Projekte",
      "sshKeyPath": "~/.ssh/id_ed25519_personal",
      "sshHost": "github-personal",
      "gpgKeyId": "ABCD1234EF567890"
    },
    {
      "id": "work-main",
      "name": "Alex MÃ¼ller",
      "email": "alex.mueller@techcorp.example.com",
      "service": "GitHub Arbeit",
      "icon": "ğŸ’¼",
      "description": "TechCorp Hauptjob",
      "sshKeyPath": "~/.ssh/id_ed25519_work",
      "sshHost": "github-work",
      "gpgKeyId": "9876543210FEDCBA"
    },
    {
      "id": "client-a",
      "name": "Alex MÃ¼ller",
      "email": "alex@clienta.example.com",
      "service": "Bitbucket",
      "icon": "ğŸ¢",
      "description": "ClientA Auftrag",
      "sshKeyPath": "~/.ssh/id_ed25519_clienta",
      "sshHost": "bitbucket-clienta"
    },
    {
      "id": "client-b",
      "name": "A.MÃ¼ller",
      "email": "a.mueller@clientb.example.com",
      "service": "Bitbucket",
      "icon": "ğŸ­",
      "description": "ClientB Vor-Ort",
      "sshKeyPath": "~/.ssh/id_ed25519_clientb",
      "sshHost": "bitbucket-clientb"
    },
    {
      "id": "oss",
      "name": "alex-dev",
      "email": "alex.dev@example.com",
      "service": "GitLab",
      "icon": "ğŸŒŸ",
      "description": "OSS-BeitrÃ¤ge",
      "sshKeyPath": "~/.ssh/id_ed25519_oss",
      "sshHost": "gitlab-oss"
    }
  ],
  "gitIdSwitcher.defaultIdentity": "personal",
  "gitIdSwitcher.autoSwitchSshKey": true,
  "gitIdSwitcher.applyToSubmodules": true
}
```

Hinweis: Das 4. Profil (`client-b`) verwendet einen Kurznamen und das 5. (`oss`) ein Entwickler-Handle. Sie kÃ¶nnen fÃ¼r jedes Profil einen anderen Anzeigenamen festlegen, auch fÃ¼r dieselbe Person.

---

## Profilverwaltung

Klicken Sie auf die Statusleiste â†’ wÃ¤hlen Sie â€Profilverwaltung" am Ende der Liste, um die VerwaltungsoberflÃ¤che zu Ã¶ffnen.
Profile hinzufÃ¼gen, bearbeiten, lÃ¶schen und umordnen â€” alles direkt Ã¼ber die BenutzeroberflÃ¤che.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/de/identity-management.webp" width="600" alt="Profilverwaltung: Anleitung zum LÃ¶schen und Umordnen" loading="lazy">

Sie kÃ¶nnen ein Profil auch Ã¼ber die Befehlspalette mit `Git ID Switcher: Delete Identity` lÃ¶schen.

---

## Befehle

| Befehl                                   | Beschreibung              |
| ---------------------------------------- | ------------------------- |
| `Git ID Switcher: Select Identity`       | Profilauswahl Ã¶ffnen      |
| `Git ID Switcher: Delete Identity`       | Profil lÃ¶schen            |
| `Git ID Switcher: Show Current Identity` | Aktuelles Profil anzeigen |
| `Git ID Switcher: Show Documentation`    | Dokumentation anzeigen    |

---

## Konfigurationsreferenz

### Profileigenschaften

| Eigenschaft   | Erforderlich | Beschreibung                                                       |
| ------------- | ------------ | ------------------------------------------------------------------ |
| `id`          | âœ…           | Eindeutige Kennung (z. B. `"personal"`, `"work"`)                  |
| `name`        | âœ…           | Git user.name â€” wird in Commits angezeigt                          |
| `email`       | âœ…           | Git user.email â€” wird in Commits angezeigt                         |
| `icon`        |              | Emoji in der Statusleiste (z. B. `"ğŸ "`). Nur einzelnes Emoji      |
| `service`     |              | Dienstname (z. B. `"GitHub"`, `"GitLab"`). FÃ¼r UI-Anzeige          |
| `description` |              | Kurze Beschreibung in Auswahl und Tooltip                          |
| `sshKeyPath`  |              | Pfad zum privaten SSH-SchlÃ¼ssel (z. B. `"~/.ssh/id_ed25519_work"`) |
| `sshHost`     |              | SSH-Config-Host-Alias (z. B. `"github-work"`)                      |
| `gpgKeyId`    |              | GPG-SchlÃ¼ssel-ID fÃ¼r Commit-Signierung                             |

#### AnzeigenbeschrÃ¤nkungen

- **Statusleiste**: Text Ã¼ber ca. 25 Zeichen wird mit `...` abgeschnitten
- **`icon`**: Nur ein einzelnes Emoji (Graphem-Cluster) erlaubt. Mehrere Emojis oder lange Zeichenketten werden nicht unterstÃ¼tzt

### Globale Einstellungen

| Einstellung                                | Standard       | Beschreibung                                                                                            |
| ------------------------------------------ | -------------- | ------------------------------------------------------------------------------------------------------- |
| `gitIdSwitcher.identities`                 | Siehe Beispiel | Liste der Profilkonfigurationen                                                                         |
| `gitIdSwitcher.defaultIdentity`            | Siehe Beispiel | ID des zu verwendenden Standardprofils                                                                  |
| `gitIdSwitcher.autoSwitchSshKey`           | `true`         | SSH-SchlÃ¼ssel beim Profilwechsel automatisch wechseln                                                   |
| `gitIdSwitcher.showNotifications`          | `true`         | Benachrichtigung beim Profilwechsel anzeigen                                                            |
| `gitIdSwitcher.applyToSubmodules`          | `true`         | Profil auf Git-Submodule Ã¼bertragen                                                                     |
| `gitIdSwitcher.submoduleDepth`             | `1`            | Maximale Tiefe fÃ¼r verschachtelte Submodul-Konfiguration (1-5)                                          |
| `gitIdSwitcher.includeIconInGitConfig`     | `false`        | Icon-Emoji in Git config `user.name` einschlieÃŸen                                                       |
| `gitIdSwitcher.logging.fileEnabled`        | `false`        | Audit-Protokoll in Datei speichern (Profilwechsel, SSH-SchlÃ¼sseloperationen usw.)                       |
| `gitIdSwitcher.logging.filePath`           | `""`           | Protokolldateipfad (z. B. `~/.git-id-switcher/security.log`). Leer = Standardort                        |
| `gitIdSwitcher.logging.maxFileSize`        | `10485760`     | Maximale DateigrÃ¶ÃŸe vor Rotation (Bytes, 1 MBâ€“100 MB)                                                   |
| `gitIdSwitcher.logging.maxFiles`           | `5`            | Maximale Anzahl rotierter Protokolldateien (1-20)                                                       |
| `gitIdSwitcher.logging.redactAllSensitive` | `false`        | Wenn aktiviert, werden alle Werte in Protokollen maskiert (maximaler Datenschutz)                       |
| `gitIdSwitcher.logging.level`              | `"INFO"`       | Protokollebene (`DEBUG`, `INFO`, `WARN`, `ERROR`, `SECURITY`). Zeichnet ausgewÃ¤hlte Ebene und hÃ¶her auf |
| `gitIdSwitcher.commandTimeouts`            | `{}`           | Benutzerdefiniertes Timeout pro Befehl (ms, 1 Sek.â€“5 Min.). Z. B. `{"git": 15000, "ssh-add": 10000}`    |

#### Ãœber `includeIconInGitConfig`

Steuert das Verhalten, wenn das `icon`-Feld gesetzt ist:

| Wert               | Verhalten                                                                             |
| ------------------ | ------------------------------------------------------------------------------------- |
| `false` (Standard) | `icon` wird nur in der Editor-UI angezeigt. Nur `name` wird in Git config geschrieben |
| `true`             | `icon + name` wird in Git config geschrieben. Emoji erscheint im Commit-Verlauf       |

Beispiel: `icon: "ğŸ‘¤"`, `name: "Alex MÃ¼ller"`

| includeIconInGitConfig | Git config `user.name` | Commit-Signatur          |
| ---------------------- | ---------------------- | ------------------------ |
| `false`                | `Alex MÃ¼ller`          | `Alex MÃ¼ller <email>`    |
| `true`                 | `ğŸ‘¤ Alex MÃ¼ller`       | `ğŸ‘¤ Alex MÃ¼ller <email>` |

---

## Funktionsweise

### Git-Config-Schichtstruktur

Git-Konfiguration hat drei Schichten, wobei hÃ¶here Schichten die niedrigeren Ã¼berschreiben:

```text
System (/etc/gitconfig)
    â†“ Ã¼berschrieben durch
Global (~/.gitconfig)
    â†“ Ã¼berschrieben durch
Lokal (.git/config)  â† hÃ¶chste PrioritÃ¤t
```

**Git ID Switcher schreibt in `--local` (Repository-lokal).**

Das bedeutet:

- Profile werden in `.git/config` jedes Repositories gespeichert
- Verschiedene Profile kÃ¶nnen pro Repository beibehalten werden
- Globale Einstellungen (`~/.gitconfig`) werden nicht verÃ¤ndert

### Verhalten beim Profilwechsel

Beim Wechsel des Profils fÃ¼hrt die Erweiterung folgendes aus (in dieser Reihenfolge):

1. **Git Config** (immer): Setzt `git config --local user.name` und `user.email`
2. **SSH-SchlÃ¼ssel** (wenn `sshKeyPath` gesetzt): Entfernt andere SchlÃ¼ssel aus ssh-agent und fÃ¼gt den ausgewÃ¤hlten hinzu
3. **GPG-SchlÃ¼ssel** (wenn `gpgKeyId` gesetzt): Setzt `git config --local user.signingkey` und aktiviert Signierung
4. **Submodule** (wenn aktiviert): ÃœbertrÃ¤gt Konfiguration auf alle Submodule (Standard: Tiefe 1)

### Wie die Submodul-Ãœbertragung funktioniert

Lokale Einstellungen sind pro Repository, daher werden sie nicht automatisch auf Submodule angewendet.
Deshalb bietet diese Erweiterung eine Submodul-Ãœbertragungsfunktion (siehe â€Fortgeschritten: Submodul-UnterstÃ¼tzung" fÃ¼r Details).

### SSH-SchlÃ¼sselverwaltung im Detail

Git ID Switcher verwaltet SSH-SchlÃ¼ssel Ã¼ber `ssh-agent`:

| Operation            | Befehl                 |
| -------------------- | ---------------------- |
| SchlÃ¼ssel hinzufÃ¼gen | `ssh-add <keyPath>`    |
| SchlÃ¼ssel entfernen  | `ssh-add -d <keyPath>` |
| SchlÃ¼ssel auflisten  | `ssh-add -l`           |

**Wichtig:** Diese Erweiterung Ã¤ndert `~/.ssh/config` **nicht**. Die SSH-Config-Einrichtung muss manuell erfolgen (siehe Schritt 2 unter â€Schnellstart").

### Zusammenspiel mit bestehender SSH-Konfiguration

Wenn Sie bereits eine SSH-Konfiguration haben, arbeitet Git ID Switcher damit zusammen:

| Ihre Konfiguration                          | Verhalten von Git ID Switcher                            |
| ------------------------------------------- | -------------------------------------------------------- |
| `~/.ssh/config` mit `IdentityFile`          | Beide nutzbar; `IdentitiesOnly yes` verhindert Konflikte |
| Umgebungsvariable `GIT_SSH_COMMAND`         | Ihr SSH-Befehl wird verwendet; ssh-agent arbeitet weiter |
| `git config core.sshCommand`                | Wie oben                                                 |
| direnv mit SSH-bezogenen Umgebungsvariablen | Koexistenz mÃ¶glich; ssh-agent arbeitet unabhÃ¤ngig        |

**Empfohlen:** Setzen Sie in Ihrer SSH-Config immer `IdentitiesOnly yes`. Dies verhindert, dass SSH mehrere SchlÃ¼ssel ausprobiert.

### Warum `IdentitiesOnly yes`?

Ohne diese Einstellung versucht SSH mÃ¶glicherweise SchlÃ¼ssel in dieser Reihenfolge:

1. Im ssh-agent geladene SchlÃ¼ssel (von Git ID Switcher verwaltet)
2. In `~/.ssh/config` angegebene SchlÃ¼ssel
3. StandardschlÃ¼ssel (`~/.ssh/id_rsa`, `~/.ssh/id_ed25519` usw.)

Dies kann zu Authentifizierungsfehlern oder unbeabsichtigter SchlÃ¼sselverwendung fÃ¼hren.

Mit `IdentitiesOnly yes` verwendet SSH **nur den angegebenen SchlÃ¼ssel**. Damit wird sichergestellt, dass der in Git ID Switcher konfigurierte SchlÃ¼ssel zuverlÃ¤ssig verwendet wird.

```ssh-config
# Empfohlene Konfiguration
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes  # â† Diese Zeile ist wichtig
```

Mit dieser Konfiguration wird bei Verbindungen zum `github-work`-Host nur `~/.ssh/id_ed25519_work` verwendet, und es werden keine anderen SchlÃ¼ssel ausprobiert.

---

## Fortgeschritten: Submodul-UnterstÃ¼tzung

Bei komplexen Repositories mit Git-Submodulen ist die Profilverwaltung oft mÃ¼hsam. Beim Committen in einem Submodul verwendet Git die lokale Konfiguration dieses Submoduls, die mÃ¶glicherweise auf die globale Konfiguration zurÃ¼ckfÃ¤llt (falsche E-Mail!), wenn sie nicht explizit gesetzt ist.

**Git ID Switcher** erkennt Submodule automatisch und wendet das ausgewÃ¤hlte Profil an.

```json
{
  "gitIdSwitcher.applyToSubmodules": true,
  "gitIdSwitcher.submoduleDepth": 1
}
```

- `applyToSubmodules`: Aktivieren/Deaktivieren dieser Funktion
- `submoduleDepth`: Wie tief soll angewendet werden?
  - `1`: Nur direkte Submodule (am hÃ¤ufigsten)
  - `2+`: Verschachtelte Submodule (Submodule in Submodulen)

Damit ist Ihr Profil immer korrekt, egal ob Sie im Haupt-Repository oder in einer Vendor-Bibliothek committen.

---

## Fehlerbehebung

### SSH-SchlÃ¼ssel wird nicht gewechselt?

1. Stellen Sie sicher, dass `ssh-agent` lÃ¤uft:

   ```bash
   eval "$(ssh-agent -s)"
   ```

2. ÃœberprÃ¼fen Sie, ob der SchlÃ¼sselpfad korrekt ist:

   ```bash
   ls -la ~/.ssh/id_ed25519_*
   ```

3. Auf macOS einmalig zum SchlÃ¼sselbund hinzufÃ¼gen:

   ```bash
   ssh-add --apple-use-keychain ~/.ssh/id_ed25519_work
   ```

### Falsches Profil beim Pushen?

**Beim neuen Klonen:**

Verwenden Sie beim Klonen von Arbeits-Repositories den in der SSH-Config eingerichteten Host-Alias:

```bash
# Arbeit (github-work-Alias verwenden)
git clone git@github-work:company/repo.git

# PersÃ¶nlich (Standard github.com verwenden)
git clone git@github.com:yourname/repo.git
```

**Bei bestehenden Repositories:**

1. PrÃ¼fen Sie, ob die Remote-URL den richtigen Host-Alias verwendet:

   ```bash
   git remote -v
   # Sollte fÃ¼r Arbeits-Repos git@github-work:... anzeigen
   ```

2. Bei Bedarf aktualisieren:

   ```bash
   git remote set-url origin git@github-work:company/repo.git
   ```

### GPG-Signierung funktioniert nicht?

1. GPG-SchlÃ¼ssel-ID ermitteln:

   ```bash
   gpg --list-secret-keys --keyid-format SHORT
   ```

2. Signierung testen:

   ```bash
   echo "test" | gpg --clearsign
   ```

3. Stellen Sie sicher, dass die E-Mail-Adresse in Ihrem Profil mit der E-Mail des GPG-SchlÃ¼ssels Ã¼bereinstimmt

### Profil wird nicht erkannt?

- Stellen Sie sicher, dass Sie sich in einem Git-Repository befinden
- PrÃ¼fen Sie `settings.json` auf Syntaxfehler
- Laden Sie das VS Code-Fenster neu (`Cmd+Shift+P` â†’ â€Fenster neu laden")

### Fehler im `name`-Feld?

Folgende Zeichen im `name`-Feld verursachen einen Fehler:

`` ` `` `$` `(` `)` `{` `}` `|` `&` `<` `>`

Verwenden Sie das `service`-Feld, wenn Sie Dienstinformationen einschlieÃŸen mÃ¶chten.

```jsonc
// NG
"name": "Alex MÃ¼ller (PersÃ¶nlich)"

// OK
"name": "Alex MÃ¼ller",
"service": "GitHub"
```

### Neue Einstellungen werden nicht angezeigt?

Nach dem Aktualisieren der Erweiterung werden neue Einstellungen mÃ¶glicherweise nicht in der Einstellungs-UI angezeigt.

**LÃ¶sung:** Starten Sie Ihren Computer vollstÃ¤ndig neu.

VS-Code-basierte Editoren cachen das Einstellungsschema im Speicher, und â€Fenster neu laden" oder Neuinstallation der Erweiterung reicht mÃ¶glicherweise nicht aus, um es zu aktualisieren.

### Standardwerte (identities usw.) leer?

Wenn Beispieleinstellungen auch nach einer Neuinstallation nicht erscheinen, kÃ¶nnte **Settings Sync** die Ursache sein.

Wenn Sie zuvor leere Einstellungen gespeichert haben, wurden sie mÃ¶glicherweise in die Cloud synchronisiert und Ã¼berschreiben bei Neuinstallationen die Standardwerte.

**LÃ¶sung:**

1. Finden Sie die Einstellung in der Einstellungs-UI
2. Klicken Sie auf das Zahnrad-Symbol â†’ â€Einstellung zurÃ¼cksetzen"
3. Mit Settings Sync synchronisieren (dies entfernt die alten Einstellungen aus der Cloud)

---

## Designphilosophie

> **â€Wer bin ich?" wechseln** â€” Die einzige Frage, die diese Erweiterung beantwortet

Entwickelt nach der **Karesansui-Architektur**: Ein einfacher Kern (100 Zeilen).
Deshalb kann der Rest in QualitÃ¤t (90 % Tests, Logging, Timeouts) und
bewusste EinschrÃ¤nkungen (keine GitHub-API, keine Token-Verwaltung) investiert werden.

[![Karesansui Architecture](https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568)](../../DESIGN_PHILOSOPHY.md)

[Die vollstÃ¤ndige Philosophie lesen](../../DESIGN_PHILOSOPHY.md)

---

## Mitwirken

BeitrÃ¤ge willkommen! Siehe [CONTRIBUTING.md](../../CONTRIBUTING.md).

## Lizenz

MIT-Lizenz â€” siehe [LICENSE](../../../LICENSE).

## Credits

Erstellt von [Null;Variant](https://github.com/nullvariant)
