# Git ID Switcher

<table>
  <tr>
    <td align="center" valign="top" width="150">
      <img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/icon.png" width="128" alt="Git ID Switcher">
    </td>
    <td>
      Basculez entre plusieurs profils Git en un clic. GÃ©rez plusieurs comptes GitHub, clÃ©s SSH, signature GPG et <b>appliquez automatiquement les profils aux sous-modules Git</b>.
      <br><br>
      <a href="https://marketplace.visualstudio.com/items?itemName=nullvariant.git-id-switcher"><img src="https://img.shields.io/visual-studio-marketplace/v/nullvariant.git-id-switcher" alt="VS Code Marketplace"></a>
      <a href="https://open-vsx.org/extension/nullvariant/git-id-switcher"><img src="https://img.shields.io/open-vsx/v/nullvariant/git-id-switcher" alt="Open VSX Registry"></a>
      <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
      <a href="https://securityscorecards.dev/viewer/?uri=github.com/nullvariant/nullvariant-vscode-extensions"><img src="https://api.securityscorecards.dev/projects/github.com/nullvariant/nullvariant-vscode-extensions/badge" alt="OpenSSF Scorecard"></a>
      <a href="https://www.bestpractices.dev/projects/11709"><img src="https://www.bestpractices.dev/projects/11709/badge" alt="OpenSSF Best Practices"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/attestations"><img src="https://img.shields.io/badge/SLSA-Level_3-green" alt="SLSA 3"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml/badge.svg" alt="Security"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml/badge.svg" alt="CI"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://img.shields.io/badge/%20-Win%20%7C%20Mac%20%7C%20Linux-blue?labelColor=555&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0yMSAySDNjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoN3YySDh2Mmg4di0yaC0ydi0yaDdjMS4xIDAgMi0uOSAyLTJWNGMwLTEuMS0uOS0yLTItMnptMCAxNEgzVjRoMTh2MTJ6Ii8+PC9zdmc+" alt="Platform"></a>
      <a href="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions"><img src="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions/graph/badge.svg" alt="codecov"></a>
      <a href="https://sonarcloud.io/summary/new_code?id=nullvariant_nullvariant-vscode-extensions"><img src="https://sonarcloud.io/api/project_badges/measure?project=nullvariant_nullvariant-vscode-extensions&metric=alert_status" alt="Quality Gate Status"></a>
      <a href="https://github.com/step-security/harden-runner"><img src="https://img.shields.io/badge/Harden--Runner-enabled-7037F5" alt="Harden-Runner"></a>
      <a href="../../DESIGN_PHILOSOPHY.md"><img src="https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568" alt="Karesansui Architecture"></a>
      <br>
      <a href="../../LANGUAGES.md"><img src="https://img.shields.io/badge/ğŸŒ_Languages-17+9_more-blue" alt="26 Languages"></a> <a href="../en/README.md">ğŸ‡ºğŸ‡¸</a> <a href="../ja/README.md">ğŸ‡¯ğŸ‡µ</a> <a href="../zh-CN/README.md">ğŸ‡¨ğŸ‡³</a> <a href="../zh-TW/README.md">ğŸ‡¹ğŸ‡¼</a> <a href="../ko/README.md">ğŸ‡°ğŸ‡·</a> <a href="../de/README.md">ğŸ‡©ğŸ‡ª</a> <b>ğŸ‡«ğŸ‡·</b> <a href="../es/README.md">ğŸ‡ªğŸ‡¸</a> <a href="../pt-BR/README.md">ğŸ‡§ğŸ‡·</a> <a href="../it/README.md">ğŸ‡®ğŸ‡¹</a> <a href="../ru/README.md">ğŸ‡·ğŸ‡º</a> <a href="../pl/README.md">ğŸ‡µğŸ‡±</a> <a href="../tr/README.md">ğŸ‡¹ğŸ‡·</a> <a href="../cs/README.md">ğŸ‡¨ğŸ‡¿</a> <a href="../hu/README.md">ğŸ‡­ğŸ‡º</a> <a href="../bg/README.md">ğŸ‡§ğŸ‡¬</a> <a href="../uk/README.md">ğŸ‡ºğŸ‡¦</a> <a href="../eo/README.md">ğŸŒ</a> <a href="../haw/README.md">ğŸŒº</a> <a href="../ain/README.md">ğŸ»</a> <a href="../ryu/README.md">ğŸ‰</a> <a href="../tok/README.md">âœ¨</a> <a href="../tlh/README.md">ğŸ––</a> <a href="../x-lolcat/README.md">ğŸ±</a> <a href="../x-pirate/README.md">ğŸ´â€â˜ ï¸</a> <a href="../x-shakespeare/README.md">ğŸ­</a>
    </td>
  </tr>
</table>

<br>

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/fr/demo.webp" width="600" alt="DÃ©mo" loading="lazy">

## ğŸ¯ Pourquoi Git ID Switcher ?

Il existe de nombreux outils de changement de profil Git, mais **Git ID Switcher** rÃ©sout les problÃ¨mes complexes que les autres ignorent souvent :

1. **Le cauchemar des sous-modules** : Lorsque vous travaillez avec des dÃ©pÃ´ts contenant des sous-modules (thÃ¨mes Hugo, bibliothÃ¨ques vendor, etc.), vous devez gÃ©nÃ©ralement dÃ©finir `git config user.name` manuellement pour _chaque_ sous-module. Cette extension rÃ©sout cela Ã©lÃ©gamment en appliquant rÃ©cursivement votre profil Ã  tous les sous-modules actifs.
2. **Gestion SSH et GPG** : Elle ne fait pas que changer votre nom â€” elle Ã©change vos clÃ©s SSH dans l'agent et configure la signature GPG pour que vous ne committiez jamais avec la mauvaise signature.

## FonctionnalitÃ©s

- **UI de gestion des profils** : Ajoutez, modifiez, supprimez et rÃ©organisez les profils sans Ã©diter settings.json
- **Changement de profil en un clic** : Modifiez instantanÃ©ment Git user.name et user.email
- **IntÃ©gration Ã  la barre d'Ã©tat** : Voyez toujours votre profil actuel d'un coup d'Å“il
- **Support des sous-modules** : Propagez automatiquement le profil aux sous-modules Git
- **Gestion des clÃ©s SSH** : Basculez automatiquement les clÃ©s SSH dans ssh-agent
- **Support de signature GPG** : Configurez la clÃ© GPG pour signer les commits (optionnel)
- **Info-bulles enrichies** : Informations dÃ©taillÃ©es avec description et hÃ´te SSH
- **Multi-plateforme** : Fonctionne sur macOS, Linux et Windows
- **Multilingue** : Supporte 17 langues

## ğŸŒ Notre engagement pour le multilinguisme

> **Je valorise l'existence des minoritÃ©s.**
> Je ne veux pas les Ã©carter simplement parce qu'elles sont peu nombreuses.
> MÃªme si les traductions ne sont pas parfaites, j'espÃ¨re que vous ressentirez notre intention de comprendre et de respecter les langues minoritaires.

Cette extension prend en charge les 17 langues supportÃ©es par VS Code. De plus, pour la documentation README, nous nous efforÃ§ons de traduire vers des langues minoritaires et mÃªme des langues humoristiques.

Ce n'est pas simplement du Â« support global Â» â€” c'est du Â« respect pour la diversitÃ© linguistique Â». Et je serais heureux si cela devenait une infrastructure oÃ¹ des commits qui amÃ©liorent le monde viennent de dÃ©veloppeurs de partout, transcendant les barriÃ¨res linguistiques.

---

## DÃ©marrage rapide

Une configuration typique pour gÃ©rer un compte personnel et un compte professionnel (Enterprise Managed User).

### Ã‰tape 1 : PrÃ©parer les clÃ©s SSH

D'abord, crÃ©ez des clÃ©s SSH pour chaque compte (passez cette Ã©tape si vous en avez dÃ©jÃ ) :

```bash
# Personnel
ssh-keygen -t ed25519 -C "camille.dupont@personal.example.com" -f ~/.ssh/id_ed25519_personal

# Travail
ssh-keygen -t ed25519 -C "camille.dupont@company.example.com" -f ~/.ssh/id_ed25519_work
```

Enregistrez la **clÃ© publique** (fichier `.pub`) de chaque clÃ© SSH sur le compte GitHub correspondant.

> **Note** : Enregistrez `id_ed25519_personal.pub` (clÃ© publique) sur GitHub. `id_ed25519_personal` (sans extension) est la clÃ© privÃ©e â€” ne la partagez jamais et ne la tÃ©lÃ©versez nulle part.

### Ã‰tape 2 : Configurer SSH

Ã‰ditez `~/.ssh/config` :

```ssh-config
# Compte GitHub personnel (par dÃ©faut)
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Compte GitHub professionnel
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes
```

### Ã‰tape 3 : Configurer l'extension

DÃ¨s l'installation, des exemples de profils sont fournis.
Suivez le guide ci-dessous pour les adapter Ã  votre usage.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/fr/first-ux.webp" width="600" alt="Configuration initiale : ouvrir la gestion des profils depuis la barre d'Ã©tat, puis modifier et crÃ©er de nouveaux profils" loading="lazy">

> **Les fichiers de clÃ©s ne sont pas transmis** : Lors de la configuration des chemins de clÃ©s SSH, seul le chemin du fichier (emplacement) est enregistrÃ©. Le contenu du fichier de clÃ© n'est jamais tÃ©lÃ©versÃ© ni transmis Ã  l'extÃ©rieur.

> **Pour utiliser la signature GPG** : Vous pouvez Ã©galement configurer `gpgKeyId` dans l'Ã©cran d'Ã©dition du profil.
> Pour trouver votre ID de clÃ© GPG, consultez Â« [DÃ©pannage](#la-signature-gpg-ne-fonctionne-pas-) Â».

> **Astuce** : Vous pouvez Ã©galement configurer directement via settings.json.
> Ouvrez les paramÃ¨tres de l'extension (`Cmd+,` / `Ctrl+,`) â†’ recherchez Â« Git ID Switcher Â» â†’ cliquez sur Â« Modifier dans settings.json Â».
> Pour des exemples de configuration JSON, consultez Â« [Exemple complet](#exemple-complet--4-comptes-avec-ssh--gpg) Â».

---

## Exemple complet : 4 comptes avec SSH + GPG

Un exemple complet combinant toutes les fonctionnalitÃ©s :

### Configuration SSH (`~/.ssh/config`)

```ssh-config
# Compte personnel (par dÃ©faut)
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Compte professionnel (Enterprise Managed User fourni par l'entreprise)
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes

# Compte Bitbucket
Host bitbucket.org
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_bitbucket
    IdentitiesOnly yes
```

### ParamÃ¨tres de l'extension

```json
{
  "gitIdSwitcher.identities": [
    {
      "id": "personal",
      "name": "Camille Dupont",
      "email": "camille.dupont@personal.example.com",
      "service": "GitHub",
      "icon": "ğŸ ",
      "description": "Projets personnels",
      "sshKeyPath": "~/.ssh/id_ed25519_personal",
      "gpgKeyId": "PERSONAL1"
    },
    {
      "id": "work",
      "name": "Camille Dupont",
      "email": "camille.dupont@company.example.com",
      "service": "GitHub Travail",
      "icon": "ğŸ’¼",
      "description": "DÃ©veloppement en entreprise",
      "sshKeyPath": "~/.ssh/id_ed25519_work",
      "sshHost": "github-work",
      "gpgKeyId": "WORK1234"
    },
    {
      "id": "bitbucket",
      "name": "Camille Dupont",
      "email": "camille.dupont@bitbucket.example.com",
      "service": "Bitbucket",
      "icon": "ğŸª£",
      "description": "Projets Bitbucket",
      "sshKeyPath": "~/.ssh/id_ed25519_bitbucket",
      "sshHost": "bitbucket.org"
    },
    {
      "id": "freelance",
      "name": "Camille Dupont",
      "email": "camille.dupont@freelance.example.com",
      "service": "GitLab",
      "icon": "ğŸ¯",
      "description": "Projets freelance"
    }
  ],
  "gitIdSwitcher.defaultIdentity": "personal",
  "gitIdSwitcher.autoSwitchSshKey": true,
  "gitIdSwitcher.applyToSubmodules": true
}
```

Remarque : Le dernier profil (`freelance`) n'a pas de SSH. Il est Ã©galement possible de ne changer que la configuration Git, par exemple pour utiliser diffÃ©rentes informations de commit avec le mÃªme compte GitHub.

---

## Gestion des profils

Cliquez sur la barre d'Ã©tat â†’ sÃ©lectionnez Â« Gestion des profils Â» en bas de la liste pour ouvrir l'interface de gestion.
Vous pouvez ajouter, modifier, supprimer et rÃ©organiser les profils directement depuis l'interface.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/fr/identity-management.webp" width="600" alt="Gestion des profils : guide de suppression et de rÃ©organisation" loading="lazy">

Vous pouvez Ã©galement supprimer un profil via la palette de commandes avec `Git ID Switcher: Delete Identity`.

---

## Commandes

| Commande                                 | Description                    |
| ---------------------------------------- | ------------------------------ |
| `Git ID Switcher: Select Identity`       | Ouvrir le sÃ©lecteur de profils |
| `Git ID Switcher: Delete Identity`       | Supprimer un profil            |
| `Git ID Switcher: Show Current Identity` | Afficher le profil actuel      |
| `Git ID Switcher: Show Documentation`    | Afficher la documentation      |

---

## RÃ©fÃ©rence de configuration

### PropriÃ©tÃ©s du profil

| PropriÃ©tÃ©     | Requis | Description                                                            |
| ------------- | ------ | ---------------------------------------------------------------------- |
| `id`          | âœ…     | Identifiant unique (ex : `"personal"`, `"work"`)                       |
| `name`        | âœ…     | Git user.name â€” affichÃ© dans les commits                               |
| `email`       | âœ…     | Git user.email â€” affichÃ© dans les commits                              |
| `icon`        |        | Emoji affichÃ© dans la barre d'Ã©tat (ex : `"ğŸ "`). Un seul emoji        |
| `service`     |        | Nom du service (ex : `"GitHub"`, `"GitLab"`). UtilisÃ© pour l'affichage |
| `description` |        | Courte description affichÃ©e dans le sÃ©lecteur et l'info-bulle          |
| `sshKeyPath`  |        | Chemin vers la clÃ© SSH privÃ©e (ex : `"~/.ssh/id_ed25519_work"`)        |
| `sshHost`     |        | Alias d'hÃ´te SSH (ex : `"github-work"`)                                |
| `gpgKeyId`    |        | ID de clÃ© GPG pour la signature des commits                            |

#### Limitations d'affichage

- **Barre d'Ã©tat** : Le texte dÃ©passant environ 25 caractÃ¨res sera tronquÃ© avec `...`
- **`icon`** : Un seul emoji (cluster de graphÃ¨mes) est autorisÃ©. Les emojis multiples ou les chaÃ®nes longues ne sont pas supportÃ©s

### ParamÃ¨tres globaux

| ParamÃ¨tre                                  | Par dÃ©faut    | Description                                                                                              |
| ------------------------------------------ | ------------- | -------------------------------------------------------------------------------------------------------- |
| `gitIdSwitcher.identities`                 | Voir exemples | Liste des configurations de profils                                                                      |
| `gitIdSwitcher.defaultIdentity`            | Voir exemples | ID du profil par dÃ©faut                                                                                  |
| `gitIdSwitcher.autoSwitchSshKey`           | `true`        | Changer automatiquement la clÃ© SSH lors du changement de profil                                          |
| `gitIdSwitcher.showNotifications`          | `true`        | Afficher une notification lors du changement de profil                                                   |
| `gitIdSwitcher.applyToSubmodules`          | `true`        | Propager le profil aux sous-modules Git                                                                  |
| `gitIdSwitcher.submoduleDepth`             | `1`           | Profondeur max pour les sous-modules imbriquÃ©s (1-5)                                                     |
| `gitIdSwitcher.includeIconInGitConfig`     | `false`       | Inclure l'emoji icÃ´ne dans le Git config `user.name`                                                     |
| `gitIdSwitcher.logging.fileEnabled`        | `false`       | Enregistrer le journal d'audit dans un fichier (changements de profil, opÃ©rations SSH, etc.)             |
| `gitIdSwitcher.logging.filePath`           | `""`          | Chemin du fichier journal (ex : `~/.git-id-switcher/security.log`). Vide = emplacement par dÃ©faut        |
| `gitIdSwitcher.logging.maxFileSize`        | `10485760`    | Taille max du fichier avant rotation (octets, 1 Moâ€“100 Mo)                                               |
| `gitIdSwitcher.logging.maxFiles`           | `5`           | Nombre max de fichiers journaux en rotation (1-20)                                                       |
| `gitIdSwitcher.logging.redactAllSensitive` | `false`       | Lorsqu'activÃ©, toutes les valeurs sont masquÃ©es dans les journaux (confidentialitÃ© maximale)             |
| `gitIdSwitcher.logging.level`              | `"INFO"`      | Niveau de journalisation (`DEBUG`, `INFO`, `WARN`, `ERROR`, `SECURITY`). Enregistre le niveau et au-delÃ  |
| `gitIdSwitcher.commandTimeouts`            | `{}`          | Timeout personnalisÃ© par commande (ms, 1 sâ€“5 min). Ex : `{"git": 15000, "ssh-add": 10000}`               |

#### Ã€ propos de `includeIconInGitConfig`

ContrÃ´le le comportement lorsque le champ `icon` est dÃ©fini :

| Valeur               | Comportement                                                                                       |
| -------------------- | -------------------------------------------------------------------------------------------------- |
| `false` (par dÃ©faut) | `icon` est affichÃ© uniquement dans l'interface de l'Ã©diteur. Seul `name` est Ã©crit dans Git config |
| `true`               | `icon + name` est Ã©crit dans Git config. L'emoji apparaÃ®t dans l'historique des commits            |

Exemple : `icon: "ğŸ‘¤"`, `name: "Camille Dupont"`

| includeIconInGitConfig | Git config `user.name` | Signature de commit         |
| ---------------------- | ---------------------- | --------------------------- |
| `false`                | `Camille Dupont`       | `Camille Dupont <email>`    |
| `true`                 | `ğŸ‘¤ Camille Dupont`    | `ğŸ‘¤ Camille Dupont <email>` |

---

## Fonctionnement

### Structure des couches Git config

La configuration Git comporte trois couches, oÃ¹ les couches de prioritÃ© supÃ©rieure remplacent les infÃ©rieures :

```text
SystÃ¨me (/etc/gitconfig)
    â†“ remplacÃ© par
Global (~/.gitconfig)
    â†“ remplacÃ© par
Local (.git/config)  â† prioritÃ© la plus Ã©levÃ©e
```

**Git ID Switcher Ã©crit en `--local` (local au dÃ©pÃ´t).**

Cela signifie :

- Le profil est sauvegardÃ© dans le `.git/config` de chaque dÃ©pÃ´t
- DiffÃ©rents profils peuvent Ãªtre maintenus par dÃ©pÃ´t
- Les paramÃ¨tres globaux (`~/.gitconfig`) ne sont pas modifiÃ©s

### Comportement lors du changement de profil

Lors du changement de profil, l'extension effectue (dans l'ordre) :

1. **Git Config** (toujours) : DÃ©finit `git config --local user.name` et `user.email`
2. **ClÃ© SSH** (si `sshKeyPath` dÃ©fini) : Supprime les autres clÃ©s de ssh-agent, ajoute celle sÃ©lectionnÃ©e
3. **ClÃ© GPG** (si `gpgKeyId` dÃ©fini) : DÃ©finit `git config --local user.signingkey` et active la signature
4. **Sous-modules** (si activÃ©) : Propage la configuration Ã  tous les sous-modules (par dÃ©faut : profondeur 1)

### Fonctionnement de la propagation aux sous-modules

Les paramÃ¨tres locaux sont par dÃ©pÃ´t, ils ne s'appliquent donc pas automatiquement aux sous-modules.
C'est pourquoi cette extension fournit la propagation aux sous-modules (voir Â« AvancÃ© : Support des sous-modules Â» pour les dÃ©tails).

### Gestion des clÃ©s SSH en dÃ©tail

Git ID Switcher gÃ¨re les clÃ©s SSH via `ssh-agent` :

| OpÃ©ration         | Commande exÃ©cutÃ©e      |
| ----------------- | ---------------------- |
| Ajouter une clÃ©   | `ssh-add <keyPath>`    |
| Supprimer une clÃ© | `ssh-add -d <keyPath>` |
| Lister les clÃ©s   | `ssh-add -l`           |

**Important :** Cette extension ne modifie **pas** `~/.ssh/config`. La configuration SSH doit Ãªtre effectuÃ©e manuellement (voir l'Ã©tape 2 du Â« DÃ©marrage rapide Â»).

### Interaction avec la configuration SSH existante

Si vous avez dÃ©jÃ  une configuration SSH, Git ID Switcher fonctionne en coexistence :

| Votre configuration                        | Comportement de Git ID Switcher                                     |
| ------------------------------------------ | ------------------------------------------------------------------- |
| `~/.ssh/config` avec `IdentityFile`        | Les deux sont utilisables ; `IdentitiesOnly yes` Ã©vite les conflits |
| Variable d'environnement `GIT_SSH_COMMAND` | Votre commande SSH est utilisÃ©e ; ssh-agent continue de fonctionner |
| `git config core.sshCommand`               | Idem                                                                |
| direnv avec des variables liÃ©es Ã  SSH      | Coexistence possible ; ssh-agent fonctionne indÃ©pendamment          |

**RecommandÃ© :** DÃ©finissez toujours `IdentitiesOnly yes` dans votre configuration SSH. Cela empÃªche SSH d'essayer plusieurs clÃ©s.

### Pourquoi `IdentitiesOnly yes` ?

Sans cette configuration, SSH peut essayer les clÃ©s dans cet ordre :

1. Les clÃ©s chargÃ©es dans ssh-agent (gÃ©rÃ©es par Git ID Switcher)
2. Les clÃ©s spÃ©cifiÃ©es dans `~/.ssh/config`
3. Les clÃ©s par dÃ©faut (`~/.ssh/id_rsa`, `~/.ssh/id_ed25519`, etc.)

Cela peut entraÃ®ner des Ã©checs d'authentification ou l'utilisation involontaire d'une mauvaise clÃ©.

Avec `IdentitiesOnly yes`, SSH utilise **uniquement la clÃ© spÃ©cifiÃ©e**. Cela garantit que la clÃ© configurÃ©e dans Git ID Switcher est utilisÃ©e de maniÃ¨re fiable.

```ssh-config
# Configuration recommandÃ©e
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes  # â† Cette ligne est importante
```

Avec cette configuration, lors de la connexion Ã  l'hÃ´te `github-work`, seul `~/.ssh/id_ed25519_work` est utilisÃ©, et aucune autre clÃ© n'est essayÃ©e.

---

## AvancÃ© : Support des sous-modules

Pour les dÃ©pÃ´ts complexes utilisant des sous-modules Git, la gestion des profils est souvent pÃ©nible. Si vous committez dans un sous-module, Git utilise la configuration locale de ce sous-module, qui peut revenir Ã  votre configuration globale (mauvaise adresse e-mail !) si elle n'est pas explicitement dÃ©finie.

**Git ID Switcher** dÃ©tecte automatiquement les sous-modules et leur applique le profil sÃ©lectionnÃ©.

```json
{
  "gitIdSwitcher.applyToSubmodules": true,
  "gitIdSwitcher.submoduleDepth": 1
}
```

- `applyToSubmodules` : Activer/dÃ©sactiver cette fonctionnalitÃ©
- `submoduleDepth` : Jusqu'Ã  quelle profondeur ?
  - `1` : Sous-modules directs uniquement (le plus courant)
  - `2+` : Sous-modules imbriquÃ©s (sous-modules dans des sous-modules)

Cela garantit que votre profil est toujours correct, que vous committiez dans le dÃ©pÃ´t principal ou dans une bibliothÃ¨que vendor.

---

## DÃ©pannage

### La clÃ© SSH ne change pas ?

1. Assurez-vous que `ssh-agent` est en cours d'exÃ©cution :

   ```bash
   eval "$(ssh-agent -s)"
   ```

2. VÃ©rifiez que le chemin de la clÃ© est correct :

   ```bash
   ls -la ~/.ssh/id_ed25519_*
   ```

3. Sur macOS, ajoutez au trousseau une fois :

   ```bash
   ssh-add --apple-use-keychain ~/.ssh/id_ed25519_work
   ```

### Mauvais profil lors du push ?

**Lors d'un nouveau clonage :**

Lors du clonage de dÃ©pÃ´ts professionnels, utilisez l'alias d'hÃ´te configurÃ© dans SSH config :

```bash
# Professionnel (utilise l'alias github-work)
git clone git@github-work:company/repo.git

# Personnel (utilise github.com par dÃ©faut)
git clone git@github.com:yourname/repo.git
```

**Pour les dÃ©pÃ´ts existants :**

1. VÃ©rifiez que l'URL distante utilise le bon alias d'hÃ´te :

   ```bash
   git remote -v
   # Devrait afficher git@github-work:... pour les dÃ©pÃ´ts professionnels
   ```

2. Mettez Ã  jour si nÃ©cessaire :

   ```bash
   git remote set-url origin git@github-work:company/repo.git
   ```

### La signature GPG ne fonctionne pas ?

1. Trouvez votre ID de clÃ© GPG :

   ```bash
   gpg --list-secret-keys --keyid-format SHORT
   ```

2. Testez la signature :

   ```bash
   echo "test" | gpg --clearsign
   ```

3. Assurez-vous que l'adresse e-mail dans votre profil correspond Ã  l'adresse de la clÃ© GPG

### Profil non dÃ©tectÃ© ?

- Assurez-vous d'Ãªtre dans un dÃ©pÃ´t Git
- VÃ©rifiez que `settings.json` n'a pas d'erreurs de syntaxe
- Rechargez la fenÃªtre VS Code (`Cmd+Shift+P` â†’ Â« Recharger la fenÃªtre Â»)

### Erreur avec le champ `name` ?

Les caractÃ¨res suivants dans le champ `name` causeront une erreur :

`` ` `` `$` `(` `)` `{` `}` `|` `&` `<` `>`

Utilisez le champ `service` si vous souhaitez inclure des informations de service.

```jsonc
// NG
"name": "Camille Dupont (Perso)"

// OK
"name": "Camille Dupont",
"service": "GitHub"
```

### Les nouveaux paramÃ¨tres n'apparaissent pas ?

AprÃ¨s la mise Ã  jour de l'extension, les nouveaux paramÃ¨tres peuvent ne pas apparaÃ®tre dans l'interface des paramÃ¨tres.

**Solution :** RedÃ©marrez complÃ¨tement votre machine.

Les Ã©diteurs basÃ©s sur VS Code mettent en cache le schÃ©ma des paramÃ¨tres en mÃ©moire, et Â« Recharger la fenÃªtre Â» ou rÃ©installer l'extension peut ne pas suffire Ã  le rafraÃ®chir.

### Les valeurs par dÃ©faut (identities, etc.) sont vides ?

Si les exemples de paramÃ¨tres n'apparaissent pas mÃªme aprÃ¨s une nouvelle installation, **Settings Sync** peut en Ãªtre la cause.

Si vous avez prÃ©cÃ©demment sauvegardÃ© des paramÃ¨tres vides, ils ont pu Ãªtre synchronisÃ©s sur le cloud et Ã©craser les valeurs par dÃ©faut lors des nouvelles installations.

**Solution :**

1. Trouvez le paramÃ¨tre dans l'interface des paramÃ¨tres
2. Cliquez sur l'icÃ´ne d'engrenage â†’ Â« RÃ©initialiser le paramÃ¨tre Â»
3. Synchronisez avec Settings Sync (cela supprime les anciens paramÃ¨tres du cloud)

---

## Philosophie de conception

> **Changer de Â« Qui suis-je Â»** â€” La seule question Ã  laquelle cette extension rÃ©pond

ConÃ§ue selon l'**architecture Karesansui** : un noyau simple (100 lignes).
C'est pourquoi le reste peut Ãªtre consacrÃ© Ã  la qualitÃ© (90 % de couverture, journalisation, timeouts)
et aux contraintes dÃ©libÃ©rÃ©es (pas d'API GitHub, pas de gestion de tokens).

[![Karesansui Architecture](https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568)](../../DESIGN_PHILOSOPHY.md)

[Lire la philosophie complÃ¨te](../../DESIGN_PHILOSOPHY.md)

---

## Contribuer

Les contributions sont les bienvenues ! Voir [CONTRIBUTING.md](../../CONTRIBUTING.md).

## Licence

Licence MIT â€” voir [LICENSE](../../../LICENSE).

## CrÃ©dits

CrÃ©Ã© par [Null;Variant](https://github.com/nullvariant)
