# Git ID Switcher

<table>
  <tr>
    <td align="center" valign="top" width="150">
      <img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/icon.png" width="128" alt="Git ID Switcher">
    </td>
    <td>
      Alterne entre vÃ¡rios perfis Git com um clique. Gerencie mÃºltiplas contas GitHub, chaves SSH e assinaturas GPG, e <b>aplique automaticamente os perfis aos submÃ³dulos Git</b>.
      <br><br>
      <a href="https://marketplace.visualstudio.com/items?itemName=nullvariant.git-id-switcher"><img src="https://img.shields.io/visual-studio-marketplace/v/nullvariant.git-id-switcher" alt="VS Code Marketplace"></a>
      <a href="https://open-vsx.org/extension/nullvariant/git-id-switcher"><img src="https://img.shields.io/open-vsx/v/nullvariant/git-id-switcher" alt="Open VSX Registry"></a>
      <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
      <a href="https://securityscorecards.dev/viewer/?uri=github.com/nullvariant/nullvariant-vscode-extensions"><img src="https://api.securityscorecards.dev/projects/github.com/nullvariant/nullvariant-vscode-extensions/badge" alt="OpenSSF Scorecard"></a>
      <a href="https://www.bestpractices.dev/projects/11709"><img src="https://www.bestpractices.dev/projects/11709/badge" alt="OpenSSF Best Practices"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/attestations"><img src="https://img.shields.io/badge/SLSA-Level_3-green" alt="SLSA 3"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml/badge.svg" alt="Security"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml/badge.svg" alt="CI"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://img.shields.io/badge/%20-Win%20%7C%20Mac%20%7C%20Linux-blue?labelColor=555&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0yMSAySDNjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoN3YySDh2Mmg4di0yaC0ydi0yaDdjMS4xIDAgMi0uOSAyLTJWNGMwLTEuMS0uOS0yLTItMnptMCAxNEgzVjRoMTh2MTJ6Ii8+PC9zdmc+" alt="Platform"></a>
      <a href="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions"><img src="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions/graph/badge.svg" alt="codecov"></a>
      <a href="https://sonarcloud.io/summary/new_code?id=nullvariant_nullvariant-vscode-extensions"><img src="https://sonarcloud.io/api/project_badges/measure?project=nullvariant_nullvariant-vscode-extensions&metric=alert_status" alt="Quality Gate Status"></a>
      <a href="https://github.com/step-security/harden-runner"><img src="https://img.shields.io/badge/Harden--Runner-enabled-7037F5" alt="Harden-Runner"></a>
      <a href="../../DESIGN_PHILOSOPHY.md"><img src="https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568" alt="Karesansui Architecture"></a>
      <br>
      <a href="../../LANGUAGES.md"><img src="https://img.shields.io/badge/ğŸŒ_Languages-17+9_more-blue" alt="26 Languages"></a> <a href="../en/README.md">ğŸ‡ºğŸ‡¸</a> <a href="../ja/README.md">ğŸ‡¯ğŸ‡µ</a> <a href="../zh-CN/README.md">ğŸ‡¨ğŸ‡³</a> <a href="../zh-TW/README.md">ğŸ‡¹ğŸ‡¼</a> <a href="../ko/README.md">ğŸ‡°ğŸ‡·</a> <a href="../de/README.md">ğŸ‡©ğŸ‡ª</a> <a href="../fr/README.md">ğŸ‡«ğŸ‡·</a> <a href="../es/README.md">ğŸ‡ªğŸ‡¸</a> <b>ğŸ‡§ğŸ‡·</b> <a href="../it/README.md">ğŸ‡®ğŸ‡¹</a> <a href="../ru/README.md">ğŸ‡·ğŸ‡º</a> <a href="../pl/README.md">ğŸ‡µğŸ‡±</a> <a href="../tr/README.md">ğŸ‡¹ğŸ‡·</a> <a href="../cs/README.md">ğŸ‡¨ğŸ‡¿</a> <a href="../hu/README.md">ğŸ‡­ğŸ‡º</a> <a href="../bg/README.md">ğŸ‡§ğŸ‡¬</a> <a href="../uk/README.md">ğŸ‡ºğŸ‡¦</a> <a href="../eo/README.md">ğŸŒ</a> <a href="../haw/README.md">ğŸŒº</a> <a href="../ain/README.md">ğŸ»</a> <a href="../ryu/README.md">ğŸ‰</a> <a href="../tok/README.md">âœ¨</a> <a href="../tlh/README.md">ğŸ––</a> <a href="../x-lolcat/README.md">ğŸ±</a> <a href="../x-pirate/README.md">ğŸ´â€â˜ ï¸</a> <a href="../x-shakespeare/README.md">ğŸ­</a>
    </td>
  </tr>
</table>

<br>

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/pt-BR/demo.webp" width="600" alt="Demo" loading="lazy">

## ğŸ¯ Por que Git ID Switcher?

Existem muitas ferramentas para alternar perfis Git, mas o **Git ID Switcher** resolve problemas complexos que outras ferramentas costumam ignorar:

1. **O pesadelo dos submÃ³dulos**: Ao trabalhar com repositÃ³rios que possuem submÃ³dulos (temas Hugo, bibliotecas vendor, etc.), normalmente Ã© necessÃ¡rio configurar `git config user.name` manualmente para _cada_ submÃ³dulo. Esta extensÃ£o resolve isso elegantemente, aplicando recursivamente o perfil a todos os submÃ³dulos ativos.
2. **GestÃ£o de SSH e GPG**: NÃ£o apenas muda seu nome â€” tambÃ©m troca suas chaves SSH no ssh-agent e configura a assinatura GPG, evitando que vocÃª faÃ§a commits com a assinatura errada.

## Funcionalidades

- **UI de gerenciamento de perfis**: Adicione, edite, exclua e reordene perfis sem editar o settings.json
- **Troca de perfil com um clique**: Altere Git user.name e user.email instantaneamente
- **IntegraÃ§Ã£o na barra de status**: Veja seu perfil atual de relance a qualquer momento
- **Suporte a submÃ³dulos**: Propague automaticamente o perfil aos submÃ³dulos Git
- **Gerenciamento de chaves SSH**: Alterne automaticamente as chaves SSH no ssh-agent
- **Suporte a assinatura GPG**: Configure a chave GPG para assinar commits (opcional)
- **Tooltips detalhados**: InformaÃ§Ãµes completas do perfil, incluindo descriÃ§Ã£o e host SSH
- **Multiplataforma**: Funciona no macOS, Linux e Windows
- **MultilÃ­ngue**: Suporta 17 idiomas

## ğŸŒ Nosso compromisso com o multilinguismo

> **Eu valorizo a existÃªncia das minorias.**
> NÃ£o quero descartÃ¡-las apenas porque sÃ£o poucas.
> Mesmo que as traduÃ§Ãµes nÃ£o sejam perfeitas, espero que vocÃª possa sentir nossa intenÃ§Ã£o de compreender e mostrar respeito pelas lÃ­nguas minoritÃ¡rias.

Esta extensÃ£o Ã© compatÃ­vel com todos os 17 idiomas suportados pelo VS Code. AlÃ©m disso, para a documentaÃ§Ã£o README, nos desafiamos a traduzir para lÃ­nguas minoritÃ¡rias e atÃ© para lÃ­nguas humorÃ­sticas.

Isso nÃ£o Ã© simplesmente Â«suporte globalÂ» â€” Ã© Â«respeito pela diversidade linguÃ­sticaÂ». E ficaria feliz se isso se tornasse uma infraestrutura onde commits que melhoram o mundo venham de desenvolvedores de todos os lugares, transcendendo as barreiras do idioma.

---

## InÃ­cio rÃ¡pido

Uma configuraÃ§Ã£o tÃ­pica para alternar entre uma conta pessoal e uma conta corporativa (Enterprise Managed User).

### Passo 1: Preparar as chaves SSH

Primeiro, crie chaves SSH para cada conta (pule se jÃ¡ tiver):

```bash
# Pessoal
ssh-keygen -t ed25519 -C "alex.silva@personal.example.com" -f ~/.ssh/id_ed25519_personal

# Trabalho
ssh-keygen -t ed25519 -C "alex.silva@company.example.com" -f ~/.ssh/id_ed25519_work
```

Registre a **chave pÃºblica** (arquivo `.pub`) de cada chave SSH na conta GitHub correspondente.

> **Nota**: O que se registra no GitHub Ã© `id_ed25519_personal.pub` (chave pÃºblica). `id_ed25519_personal` (sem extensÃ£o) Ã© a chave privada â€” nunca compartilhe nem faÃ§a upload em lugar nenhum.

### Passo 2: Configurar o SSH config

Edite `~/.ssh/config`:

```ssh-config
# Conta GitHub pessoal (padrÃ£o)
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Conta GitHub de trabalho
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes
```

### Passo 3: Configurar a extensÃ£o

Ao instalar a extensÃ£o, perfis de exemplo sÃ£o disponibilizados.
Siga o guia abaixo para editÃ¡-los conforme suas necessidades.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/pt-BR/first-ux.webp" width="600" alt="ConfiguraÃ§Ã£o inicial (13 passos): abrir o gerenciamento de perfis pela barra de status, editar e criar novos perfis" loading="lazy">

> **Os arquivos de chave nÃ£o sÃ£o enviados**: Ao configurar caminhos de chaves SSH, apenas o caminho (localizaÃ§Ã£o) do arquivo Ã© registrado. O conteÃºdo do arquivo de chave nunca Ã© carregado ou transmitido externamente.

> **Se usar assinatura GPG**: TambÃ©m Ã© possÃ­vel configurar `gpgKeyId` na tela de ediÃ§Ã£o do perfil.
> Para encontrar seu ID de chave GPG, consulte Â«[SoluÃ§Ã£o de problemas](#assinatura-gpg-nÃ£o-funciona)Â».

> **Dica**: TambÃ©m Ã© possÃ­vel configurar diretamente pelo settings.json.
> Abra as configuraÃ§Ãµes da extensÃ£o (`Cmd+,` / `Ctrl+,`) â†’ pesquise Â«Git ID SwitcherÂ» â†’ clique em Â«Editar em settings.jsonÂ».
> Para exemplos de configuraÃ§Ã£o em formato JSON, consulte Â«[Exemplo completo](#exemplo-completo-5-contas-com-ssh--gpg)Â».

---

## Exemplo completo: 5 contas com SSH + GPG

Um exemplo completo combinando todas as funcionalidades:

### ConfiguraÃ§Ã£o SSH (`~/.ssh/config`)

```ssh-config
# Conta pessoal (padrÃ£o)
Host github-personal
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Conta de trabalho (Enterprise Managed User emitido pela empresa)
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes

# Cliente A â€“ trabalho sob contrato (Bitbucket)
Host bitbucket-clienta
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_clienta
    IdentitiesOnly yes

# Cliente B â€“ projeto presencial (Bitbucket)
Host bitbucket-clientb
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_clientb
    IdentitiesOnly yes

# ContribuiÃ§Ãµes OSS (GitLab)
Host gitlab-oss
    HostName gitlab.com
    User git
    IdentityFile ~/.ssh/id_ed25519_oss
    IdentitiesOnly yes
```

### ConfiguraÃ§Ãµes da extensÃ£o

```json
{
  "gitIdSwitcher.identities": [
    {
      "id": "personal",
      "name": "Alex Silva",
      "email": "alex@personal.example.com",
      "service": "GitHub",
      "icon": "ğŸ ",
      "description": "Projetos pessoais",
      "sshKeyPath": "~/.ssh/id_ed25519_personal",
      "sshHost": "github-personal",
      "gpgKeyId": "ABCD1234EF567890"
    },
    {
      "id": "work-main",
      "name": "Alex Silva",
      "email": "alex.silva@techcorp.example.com",
      "service": "GitHub Trabalho",
      "icon": "ğŸ’¼",
      "description": "TechCorp trabalho principal",
      "sshKeyPath": "~/.ssh/id_ed25519_work",
      "sshHost": "github-work",
      "gpgKeyId": "9876543210FEDCBA"
    },
    {
      "id": "client-a",
      "name": "Alex Silva",
      "email": "alex@clienta.example.com",
      "service": "Bitbucket",
      "icon": "ğŸ¢",
      "description": "ClientA contrato",
      "sshKeyPath": "~/.ssh/id_ed25519_clienta",
      "sshHost": "bitbucket-clienta"
    },
    {
      "id": "client-b",
      "name": "A.Silva",
      "email": "a.silva@clientb.example.com",
      "service": "Bitbucket",
      "icon": "ğŸ­",
      "description": "ClientB presencial",
      "sshKeyPath": "~/.ssh/id_ed25519_clientb",
      "sshHost": "bitbucket-clientb"
    },
    {
      "id": "oss",
      "name": "alex-dev",
      "email": "alex.dev@example.com",
      "service": "GitLab",
      "icon": "ğŸŒŸ",
      "description": "ContribuiÃ§Ãµes OSS",
      "sshKeyPath": "~/.ssh/id_ed25519_oss",
      "sshHost": "gitlab-oss"
    }
  ],
  "gitIdSwitcher.defaultIdentity": "personal",
  "gitIdSwitcher.autoSwitchSshKey": true,
  "gitIdSwitcher.applyToSubmodules": true
}
```

Nota: O 4Âº perfil (`client-b`) usa um nome abreviado e o 5Âº (`oss`) usa um handle de desenvolvedor. VocÃª pode definir nomes de exibiÃ§Ã£o diferentes para cada perfil, mesmo para a mesma pessoa.

---

## Gerenciamento de perfis

Clique na barra de status â†’ selecione Â«Gerenciamento de perfisÂ» na parte inferior da lista para abrir a tela de gerenciamento.
A adiÃ§Ã£o, ediÃ§Ã£o, exclusÃ£o e reordenaÃ§Ã£o de perfis podem ser feitas diretamente pela interface.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/pt-BR/identity-management.webp" width="600" alt="Gerenciamento de perfis: guia de exclusÃ£o e reordenaÃ§Ã£o" loading="lazy">

TambÃ©m Ã© possÃ­vel excluir um perfil pela paleta de comandos com `Git ID Switcher: Delete Identity`.

---

## Comandos

| Comando                                  | DescriÃ§Ã£o                           |
| ---------------------------------------- | ----------------------------------- |
| `Git ID Switcher: Select Identity`       | Abrir o seletor de perfis           |
| `Git ID Switcher: Delete Identity`       | Excluir um perfil                   |
| `Git ID Switcher: Show Current Identity` | Mostrar informaÃ§Ãµes do perfil atual |
| `Git ID Switcher: Show Documentation`    | Mostrar documentaÃ§Ã£o                |

---

## ReferÃªncia de configuraÃ§Ã£o

### Propriedades do perfil

| Propriedade   | ObrigatÃ³rio | DescriÃ§Ã£o                                                                |
| ------------- | ----------- | ------------------------------------------------------------------------ |
| `id`          | âœ…          | Identificador Ãºnico (ex.: `"personal"`, `"work"`)                        |
| `name`        | âœ…          | Git user.name â€” exibido nos commits                                      |
| `email`       | âœ…          | Git user.email â€” exibido nos commits                                     |
| `icon`        |             | Emoji na barra de status (ex.: `"ğŸ "`). Apenas um emoji                  |
| `service`     |             | Nome do serviÃ§o (ex.: `"GitHub"`, `"GitLab"`). Usado para exibiÃ§Ã£o na UI |
| `description` |             | DescriÃ§Ã£o breve exibida no seletor e no tooltip                          |
| `sshKeyPath`  |             | Caminho para a chave SSH privada (ex.: `"~/.ssh/id_ed25519_work"`)       |
| `sshHost`     |             | Alias de host SSH (ex.: `"github-work"`)                                 |
| `gpgKeyId`    |             | ID da chave GPG para assinar commits                                     |

#### LimitaÃ§Ãµes de exibiÃ§Ã£o

- **Barra de status**: Texto que exceda ~25 caracteres serÃ¡ truncado com `...`
- **`icon`**: Apenas um emoji (cluster de grafemas) Ã© permitido. MÃºltiplos emojis ou strings longas nÃ£o sÃ£o suportados

### ConfiguraÃ§Ãµes globais

| ConfiguraÃ§Ã£o                               | PadrÃ£o       | DescriÃ§Ã£o                                                                                              |
| ------------------------------------------ | ------------ | ------------------------------------------------------------------------------------------------------ |
| `gitIdSwitcher.identities`                 | Ver exemplos | Lista de configuraÃ§Ãµes de perfis                                                                       |
| `gitIdSwitcher.defaultIdentity`            | Ver exemplos | ID do perfil padrÃ£o a ser usado                                                                        |
| `gitIdSwitcher.autoSwitchSshKey`           | `true`       | Trocar automaticamente a chave SSH ao mudar de perfil                                                  |
| `gitIdSwitcher.showNotifications`          | `true`       | Mostrar notificaÃ§Ã£o ao trocar de perfil                                                                |
| `gitIdSwitcher.applyToSubmodules`          | `true`       | Propagar o perfil aos submÃ³dulos Git                                                                   |
| `gitIdSwitcher.submoduleDepth`             | `1`          | Profundidade mÃ¡xima para submÃ³dulos aninhados (1-5)                                                    |
| `gitIdSwitcher.includeIconInGitConfig`     | `false`      | Incluir o emoji do Ã­cone no `user.name` do Git config                                                  |
| `gitIdSwitcher.logging.fileEnabled`        | `false`      | Salvar log de auditoria em arquivo (mudanÃ§as de perfil, operaÃ§Ãµes SSH, etc.)                           |
| `gitIdSwitcher.logging.filePath`           | `""`         | Caminho do arquivo de log (ex.: `~/.git-id-switcher/security.log`). Vazio = local padrÃ£o               |
| `gitIdSwitcher.logging.maxFileSize`        | `10485760`   | Tamanho mÃ¡ximo do arquivo antes da rotaÃ§Ã£o (bytes, 1 MBâ€“100 MB)                                        |
| `gitIdSwitcher.logging.maxFiles`           | `5`          | NÃºmero mÃ¡ximo de arquivos de log em rotaÃ§Ã£o (1-20)                                                     |
| `gitIdSwitcher.logging.redactAllSensitive` | `false`      | Quando ativado, todos os valores sÃ£o mascarados nos logs (mÃ¡xima privacidade)                          |
| `gitIdSwitcher.logging.level`              | `"INFO"`     | NÃ­vel de log (`DEBUG`, `INFO`, `WARN`, `ERROR`, `SECURITY`). Registra o nÃ­vel selecionado e superiores |
| `gitIdSwitcher.commandTimeouts`            | `{}`         | Timeout personalizado por comando (ms, 1 sâ€“5 min). Ex.: `{"git": 15000, "ssh-add": 10000}`             |

#### Sobre `includeIconInGitConfig`

Controla o comportamento quando o campo `icon` estÃ¡ configurado:

| Valor            | Comportamento                                                                         |
| ---------------- | ------------------------------------------------------------------------------------- |
| `false` (padrÃ£o) | `icon` Ã© exibido apenas na interface do editor. Apenas `name` Ã© gravado no Git config |
| `true`           | `icon + name` Ã© gravado no Git config. O emoji aparece no histÃ³rico de commits        |

Exemplo: `icon: "ğŸ‘¤"`, `name: "Alex Silva"`

| includeIconInGitConfig | Git config `user.name` | Assinatura do commit    |
| ---------------------- | ---------------------- | ----------------------- |
| `false`                | `Alex Silva`           | `Alex Silva <email>`    |
| `true`                 | `ğŸ‘¤ Alex Silva`        | `ğŸ‘¤ Alex Silva <email>` |

---

## Como funciona

### Estrutura de camadas do Git config

A configuraÃ§Ã£o do Git possui trÃªs camadas, onde as camadas inferiores sobrescrevem as superiores:

```text
Sistema (/etc/gitconfig)
    â†“ sobrescreve
Global (~/.gitconfig)
    â†“ sobrescreve
Local (.git/config)  â† maior prioridade
```

**Git ID Switcher grava em `--local` (local ao repositÃ³rio).**

Isso significa:

- O perfil Ã© salvo no `.git/config` de cada repositÃ³rio
- Diferentes perfis podem ser mantidos por repositÃ³rio
- As configuraÃ§Ãµes globais (`~/.gitconfig`) nÃ£o sÃ£o modificadas

### Comportamento ao trocar de perfil

Ao trocar de perfil, a extensÃ£o executa (em ordem):

1. **Git Config** (sempre): Define `git config --local user.name` e `user.email`
2. **Chave SSH** (se `sshKeyPath` configurado): Remove outras chaves do ssh-agent e adiciona a selecionada
3. **Chave GPG** (se `gpgKeyId` configurado): Define `git config --local user.signingkey` e ativa a assinatura
4. **SubmÃ³dulos** (se ativado): Propaga a configuraÃ§Ã£o para todos os submÃ³dulos (padrÃ£o: profundidade 1)

### PropagaÃ§Ã£o para submÃ³dulos

A configuraÃ§Ã£o local Ã© por repositÃ³rio, portanto nÃ£o se aplica automaticamente aos submÃ³dulos.
Por isso, esta extensÃ£o fornece a funcionalidade de propagaÃ§Ã£o para submÃ³dulos (consulte Â«AvanÃ§ado: Suporte a submÃ³dulosÂ» para mais detalhes).

### Gerenciamento de chaves SSH em detalhes

Git ID Switcher gerencia as chaves SSH por meio do `ssh-agent`:

| OperaÃ§Ã£o        | Comando executado      |
| --------------- | ---------------------- |
| Adicionar chave | `ssh-add <keyPath>`    |
| Remover chave   | `ssh-add -d <keyPath>` |
| Listar chaves   | `ssh-add -l`           |

**Importante:** Esta extensÃ£o **nÃ£o modifica** `~/.ssh/config`. A configuraÃ§Ã£o SSH deve ser feita manualmente (consulte o passo 2 de Â«InÃ­cio rÃ¡pidoÂ»).

### InteraÃ§Ã£o com a configuraÃ§Ã£o SSH existente

Se vocÃª jÃ¡ possui uma configuraÃ§Ã£o SSH, o Git ID Switcher funciona em coexistÃªncia:

| Sua configuraÃ§Ã£o                        | Comportamento do Git ID Switcher                                |
| --------------------------------------- | --------------------------------------------------------------- |
| `~/.ssh/config` com `IdentityFile`      | Ambas sÃ£o utilizÃ¡veis; `IdentitiesOnly yes` evita conflitos     |
| VariÃ¡vel de ambiente `GIT_SSH_COMMAND`  | Seu comando SSH personalizado Ã© usado; ssh-agent continua ativo |
| `git config core.sshCommand`            | Igual ao anterior                                               |
| direnv com variÃ¡veis relacionadas a SSH | CoexistÃªncia possÃ­vel; ssh-agent funciona independentemente     |

**Recomendado:** Sempre configure `IdentitiesOnly yes` no seu SSH config. Isso evita que o SSH tente mÃºltiplas chaves.

### Por que `IdentitiesOnly yes`?

Sem essa configuraÃ§Ã£o, o SSH pode tentar as chaves na seguinte ordem:

1. Chaves carregadas no ssh-agent (gerenciadas pelo Git ID Switcher)
2. Chaves especificadas em `~/.ssh/config`
3. Chaves padrÃ£o (`~/.ssh/id_rsa`, `~/.ssh/id_ed25519`, etc.)

Isso pode causar falhas de autenticaÃ§Ã£o ou o uso involuntÃ¡rio de uma chave incorreta.

Com `IdentitiesOnly yes`, o SSH utiliza **apenas a chave especificada**. Isso garante que a chave configurada no Git ID Switcher seja usada de forma confiÃ¡vel.

```ssh-config
# ConfiguraÃ§Ã£o recomendada
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes  # â† Esta linha Ã© importante
```

Com essa configuraÃ§Ã£o, ao conectar ao host `github-work`, apenas `~/.ssh/id_ed25519_work` Ã© utilizada e nenhuma outra chave Ã© tentada.

---

## AvanÃ§ado: Suporte a submÃ³dulos

Em repositÃ³rios complexos com submÃ³dulos Git, o gerenciamento de perfis costuma ser problemÃ¡tico. Ao fazer commit em um submÃ³dulo, o Git utiliza a configuraÃ§Ã£o local desse submÃ³dulo, que pode recorrer Ã  configuraÃ§Ã£o global (e-mail errado!) caso nÃ£o tenha sido configurada explicitamente.

**Git ID Switcher** detecta automaticamente os submÃ³dulos e aplica o perfil selecionado.

```json
{
  "gitIdSwitcher.applyToSubmodules": true,
  "gitIdSwitcher.submoduleDepth": 1
}
```

- `applyToSubmodules`: Ativa/desativa esta funcionalidade
- `submoduleDepth`: AtÃ© que profundidade aplicar?
  - `1`: Apenas submÃ³dulos diretos (mais comum)
  - `2+`: SubmÃ³dulos aninhados (submÃ³dulos dentro de submÃ³dulos)

Isso garante que seu perfil esteja sempre correto, seja fazendo commit no repositÃ³rio principal ou em uma biblioteca vendor.

---

## SoluÃ§Ã£o de problemas

### A chave SSH nÃ£o muda?

1. Certifique-se de que o `ssh-agent` estÃ¡ em execuÃ§Ã£o:

   ```bash
   eval "$(ssh-agent -s)"
   ```

2. Verifique se o caminho da chave estÃ¡ correto:

   ```bash
   ls -la ~/.ssh/id_ed25519_*
   ```

3. No macOS, adicione ao Keychain uma vez:

   ```bash
   ssh-add --apple-use-keychain ~/.ssh/id_ed25519_work
   ```

### Perfil incorreto ao fazer push?

**Ao clonar um repositÃ³rio novo:**

Ao clonar repositÃ³rios de trabalho, use o alias de host configurado no SSH config:

```bash
# Trabalho (usa o alias github-work)
git clone git@github-work:company/repo.git

# Pessoal (usa github.com padrÃ£o)
git clone git@github.com:yourname/repo.git
```

**Para repositÃ³rios existentes:**

1. Verifique se a URL remota usa o alias de host correto:

   ```bash
   git remote -v
   # Deve mostrar git@github-work:... para repos de trabalho
   ```

2. Atualize se necessÃ¡rio:

   ```bash
   git remote set-url origin git@github-work:company/repo.git
   ```

### Assinatura GPG nÃ£o funciona?

1. Encontre seu ID de chave GPG:

   ```bash
   gpg --list-secret-keys --keyid-format SHORT
   ```

2. Teste a assinatura:

   ```bash
   echo "test" | gpg --clearsign
   ```

3. Certifique-se de que o e-mail no seu perfil corresponda ao e-mail da chave GPG

### Perfil nÃ£o detectado?

- Certifique-se de estar dentro de um repositÃ³rio Git
- Verifique se o `settings.json` nÃ£o possui erros de sintaxe
- Recarregue a janela do VS Code (`Cmd+Shift+P` â†’ Â«Recarregar JanelaÂ»)

### Erro com o campo `name`?

Os seguintes caracteres no campo `name` causarÃ£o um erro:

`` ` `` `$` `(` `)` `{` `}` `|` `&` `<` `>`

Se deseja incluir informaÃ§Ãµes do serviÃ§o, use o campo `service`.

```jsonc
// NG
"name": "Alex Silva (Pessoal)"

// OK
"name": "Alex Silva",
"service": "GitHub"
```

### Novas configuraÃ§Ãµes nÃ£o aparecem?

ApÃ³s atualizar a extensÃ£o, novas configuraÃ§Ãµes podem nÃ£o aparecer na interface de configuraÃ§Ãµes.

**SoluÃ§Ã£o:** Reinicie completamente sua mÃ¡quina.

Editores baseados em VS Code armazenam em cache o schema de configuraÃ§Ãµes na memÃ³ria, e Â«Recarregar JanelaÂ» ou reinstalar a extensÃ£o pode nÃ£o ser suficiente para atualizÃ¡-lo.

### Valores padrÃ£o (identities, etc.) estÃ£o vazios?

Se as configuraÃ§Ãµes de exemplo nÃ£o aparecem mesmo apÃ³s uma instalaÃ§Ã£o limpa, o **Settings Sync** pode ser a causa.

Se vocÃª salvou anteriormente configuraÃ§Ãµes vazias, elas podem ter sido sincronizadas para a nuvem e estÃ£o sobrescrevendo os valores padrÃ£o em novas instalaÃ§Ãµes.

**SoluÃ§Ã£o:**

1. Encontre a configuraÃ§Ã£o na interface de configuraÃ§Ãµes
2. Clique no Ã­cone de engrenagem â†’ Â«Redefinir ConfiguraÃ§Ã£oÂ»
3. Sincronize com Settings Sync (isso remove as configuraÃ§Ãµes antigas da nuvem)

---

## Filosofia de design

> **Mudar Â«Quem sou euÂ»** â€” A Ãºnica pergunta que esta extensÃ£o responde

Projetada com a **arquitetura Karesansui**: um nÃºcleo simples (100 linhas).
Por isso, o restante pode ser dedicado Ã  qualidade (90% de cobertura, logging, timeouts)
e a restriÃ§Ãµes deliberadas (sem API do GitHub, sem gerenciamento de tokens).

[![Karesansui Architecture](https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568)](../../DESIGN_PHILOSOPHY.md)

[Leia a filosofia completa](../../DESIGN_PHILOSOPHY.md)

---

## Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Consulte [CONTRIBUTING.md](../../CONTRIBUTING.md).

## LicenÃ§a

LicenÃ§a MIT â€” consulte [LICENSE](../../../LICENSE).

## CrÃ©ditos

Criado por [Null;Variant](https://github.com/nullvariant)
