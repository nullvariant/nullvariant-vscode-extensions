# Git ID Switcher

<table>
  <tr>
    <td align="center" valign="top" width="150">
      <img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/icon.png" width="128" alt="Git ID Switcher">
    </td>
    <td>
      Cambia entre varios perfiles Git con un solo clic. Gestiona mÃºltiples cuentas de GitHub, claves SSH y firmas GPG, y <b>aplica automÃ¡ticamente los perfiles a los submÃ³dulos Git</b>.
      <br><br>
      <a href="https://marketplace.visualstudio.com/items?itemName=nullvariant.git-id-switcher"><img src="https://img.shields.io/visual-studio-marketplace/v/nullvariant.git-id-switcher" alt="VS Code Marketplace"></a>
      <a href="https://open-vsx.org/extension/nullvariant/git-id-switcher"><img src="https://img.shields.io/open-vsx/v/nullvariant/git-id-switcher" alt="Open VSX Registry"></a>
      <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
      <a href="https://securityscorecards.dev/viewer/?uri=github.com/nullvariant/nullvariant-vscode-extensions"><img src="https://api.securityscorecards.dev/projects/github.com/nullvariant/nullvariant-vscode-extensions/badge" alt="OpenSSF Scorecard"></a>
      <a href="https://www.bestpractices.dev/projects/11709"><img src="https://www.bestpractices.dev/projects/11709/badge" alt="OpenSSF Best Practices"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/attestations"><img src="https://img.shields.io/badge/SLSA-Level_3-green" alt="SLSA 3"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/security.yml/badge.svg" alt="Security"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml/badge.svg" alt="CI"></a>
      <a href="https://github.com/nullvariant/nullvariant-vscode-extensions/actions/workflows/ci.yml"><img src="https://img.shields.io/badge/%20-Win%20%7C%20Mac%20%7C%20Linux-blue?labelColor=555&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0yMSAySDNjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoN3YySDh2Mmg4di0yaC0ydi0yaDdjMS4xIDAgMi0uOSAyLTJWNGMwLTEuMS0uOS0yLTItMnptMCAxNEgzVjRoMTh2MTJ6Ii8+PC9zdmc+" alt="Platform"></a>
      <a href="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions"><img src="https://codecov.io/gh/nullvariant/nullvariant-vscode-extensions/graph/badge.svg" alt="codecov"></a>
      <a href="https://sonarcloud.io/summary/new_code?id=nullvariant_nullvariant-vscode-extensions"><img src="https://sonarcloud.io/api/project_badges/measure?project=nullvariant_nullvariant-vscode-extensions&metric=alert_status" alt="Quality Gate Status"></a>
      <a href="https://github.com/step-security/harden-runner"><img src="https://img.shields.io/badge/Harden--Runner-enabled-7037F5" alt="Harden-Runner"></a>
      <a href="../../DESIGN_PHILOSOPHY.md"><img src="https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568" alt="Karesansui Architecture"></a>
      <br>
      <a href="../../LANGUAGES.md"><img src="https://img.shields.io/badge/ğŸŒ_Languages-17+9_more-blue" alt="26 Languages"></a> <a href="../en/README.md">ğŸ‡ºğŸ‡¸</a> <a href="../ja/README.md">ğŸ‡¯ğŸ‡µ</a> <a href="../zh-CN/README.md">ğŸ‡¨ğŸ‡³</a> <a href="../zh-TW/README.md">ğŸ‡¹ğŸ‡¼</a> <a href="../ko/README.md">ğŸ‡°ğŸ‡·</a> <a href="../de/README.md">ğŸ‡©ğŸ‡ª</a> <a href="../fr/README.md">ğŸ‡«ğŸ‡·</a> <b>ğŸ‡ªğŸ‡¸</b> <a href="../pt-BR/README.md">ğŸ‡§ğŸ‡·</a> <a href="../it/README.md">ğŸ‡®ğŸ‡¹</a> <a href="../ru/README.md">ğŸ‡·ğŸ‡º</a> <a href="../pl/README.md">ğŸ‡µğŸ‡±</a> <a href="../tr/README.md">ğŸ‡¹ğŸ‡·</a> <a href="../cs/README.md">ğŸ‡¨ğŸ‡¿</a> <a href="../hu/README.md">ğŸ‡­ğŸ‡º</a> <a href="../bg/README.md">ğŸ‡§ğŸ‡¬</a> <a href="../uk/README.md">ğŸ‡ºğŸ‡¦</a> <a href="../eo/README.md">ğŸŒ</a> <a href="../haw/README.md">ğŸŒº</a> <a href="../ain/README.md">ğŸ»</a> <a href="../ryu/README.md">ğŸ‰</a> <a href="../tok/README.md">âœ¨</a> <a href="../tlh/README.md">ğŸ––</a> <a href="../x-lolcat/README.md">ğŸ±</a> <a href="../x-pirate/README.md">ğŸ´â€â˜ ï¸</a> <a href="../x-shakespeare/README.md">ğŸ­</a>
    </td>
  </tr>
</table>

<br>

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/es/demo.webp" width="600" alt="Demo" loading="lazy">

## ğŸ¯ Â¿Por quÃ© Git ID Switcher?

Existen muchas herramientas para cambiar perfiles Git, pero **Git ID Switcher** resuelve problemas complejos que otras herramientas suelen pasar por alto:

1. **La pesadilla de los submÃ³dulos**: Cuando trabajas con repositorios que contienen submÃ³dulos (temas de Hugo, bibliotecas vendor, etc.), normalmente necesitas configurar `git config user.name` manualmente para _cada_ submÃ³dulo. Esta extensiÃ³n lo resuelve elegantemente aplicando recursivamente el perfil a todos los submÃ³dulos activos.
2. **GestiÃ³n de SSH y GPG**: No solo cambia tu nombre â€” tambiÃ©n intercambia tus claves SSH en ssh-agent y configura la firma GPG, evitando que hagas commits con la firma incorrecta.

## Funcionalidades

- **UI de gestiÃ³n de perfiles**: AÃ±ade, edita, elimina y reordena perfiles sin editar settings.json
- **Cambio de perfil con un clic**: Cambia Git user.name y user.email instantÃ¡neamente
- **IntegraciÃ³n en la barra de estado**: Consulta tu perfil actual de un vistazo en todo momento
- **Soporte de submÃ³dulos**: Propaga automÃ¡ticamente el perfil a los submÃ³dulos Git
- **GestiÃ³n de claves SSH**: Cambia automÃ¡ticamente las claves SSH en ssh-agent
- **Soporte de firma GPG**: Configura la clave GPG para firmar commits (opcional)
- **Tooltips enriquecidos**: InformaciÃ³n detallada del perfil, incluyendo descripciÃ³n y host SSH
- **Multiplataforma**: Funciona en macOS, Linux y Windows
- **MultilingÃ¼e**: Soporta 17 idiomas

## ğŸŒ Nuestro compromiso con el multilingÃ¼ismo

> **Valoro la existencia de las minorÃ­as.**
> No quiero descartarlas solo porque sean pocas.
> Aunque las traducciones no sean perfectas, espero que puedas sentir nuestra intenciÃ³n de comprender y mostrar respeto por las lenguas minoritarias.

Esta extensiÃ³n es compatible con los 17 idiomas que soporta VS Code. AdemÃ¡s, para la documentaciÃ³n README, nos hemos atrevido a traducir a lenguas minoritarias e incluso a lenguas humorÃ­sticas.

Esto no es simplemente Â«soporte globalÂ» â€” es Â«respeto por la diversidad lingÃ¼Ã­sticaÂ». Y me alegrarÃ­a que esto se convirtiera en una infraestructura donde commits que mejoran el mundo vengan de desarrolladores de todas partes, trascendiendo las barreras del idioma.

---

## Inicio rÃ¡pido

Una configuraciÃ³n tÃ­pica para alternar entre una cuenta personal y una cuenta corporativa (Enterprise Managed User).

### Paso 1: Preparar las claves SSH

Primero, crea claves SSH para cada cuenta (omite este paso si ya las tienes):

```bash
# Personal
ssh-keygen -t ed25519 -C "alex.garcia@personal.example.com" -f ~/.ssh/id_ed25519_personal

# Trabajo
ssh-keygen -t ed25519 -C "alex.garcia@company.example.com" -f ~/.ssh/id_ed25519_work
```

Registra la **clave pÃºblica** (archivo `.pub`) de cada clave SSH en la cuenta de GitHub correspondiente.

> **Nota**: Lo que registras en GitHub es `id_ed25519_personal.pub` (clave pÃºblica). `id_ed25519_personal` (sin extensiÃ³n) es la clave privada â€” nunca la compartas ni la subas a ningÃºn sitio.

### Paso 2: Configurar SSH config

Edita `~/.ssh/config`:

```ssh-config
# Cuenta personal de GitHub (predeterminada)
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Cuenta de trabajo de GitHub
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes
```

### Paso 3: Configurar la extensiÃ³n

Al instalar la extensiÃ³n, se incluyen perfiles de ejemplo.
Sigue la guÃ­a a continuaciÃ³n para editarlos a tu medida.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/es/first-ux.webp" width="600" alt="ConfiguraciÃ³n inicial (13 pasos): abrir la gestiÃ³n de perfiles desde la barra de estado, editar y crear nuevos perfiles" loading="lazy">

> **Los archivos de claves no se envÃ­an**: Al configurar las rutas de claves SSH, solo se registra la ruta (ubicaciÃ³n) del archivo. El contenido del archivo de claves nunca se sube ni se transmite al exterior.

> **Si usas firma GPG**: TambiÃ©n puedes configurar `gpgKeyId` en la pantalla de ediciÃ³n del perfil.
> Para encontrar tu ID de clave GPG, consulta Â«[SoluciÃ³n de problemas](#la-firma-gpg-no-funciona)Â».

> **Consejo**: TambiÃ©n puedes configurar directamente desde settings.json.
> Abre los ajustes de la extensiÃ³n (`Cmd+,` / `Ctrl+,`) â†’ busca Â«Git ID SwitcherÂ» â†’ haz clic en Â«Editar en settings.jsonÂ».
> Para ejemplos de configuraciÃ³n en formato JSON, consulta Â«[Ejemplo completo](#ejemplo-completo-5-cuentas-con-ssh--gpg)Â».

---

## Ejemplo completo: 5 cuentas con SSH + GPG

Un ejemplo completo combinando todas las funcionalidades:

### ConfiguraciÃ³n SSH (`~/.ssh/config`)

```ssh-config
# Cuenta personal (predeterminada)
Host github-personal
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_personal
    IdentitiesOnly yes

# Cuenta de trabajo (Enterprise Managed User emitido por la empresa)
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes

# Cliente A â€“ trabajo por contrato (Bitbucket)
Host bitbucket-clienta
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_clienta
    IdentitiesOnly yes

# Cliente B â€“ proyecto en sitio (Bitbucket)
Host bitbucket-clientb
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/id_ed25519_clientb
    IdentitiesOnly yes

# Contribuciones OSS (GitLab)
Host gitlab-oss
    HostName gitlab.com
    User git
    IdentityFile ~/.ssh/id_ed25519_oss
    IdentitiesOnly yes
```

### Ajustes de la extensiÃ³n

```json
{
  "gitIdSwitcher.identities": [
    {
      "id": "personal",
      "name": "Alex GarcÃ­a",
      "email": "alex@personal.example.com",
      "service": "GitHub",
      "icon": "ğŸ ",
      "description": "Proyectos personales",
      "sshKeyPath": "~/.ssh/id_ed25519_personal",
      "sshHost": "github-personal",
      "gpgKeyId": "ABCD1234EF567890"
    },
    {
      "id": "work-main",
      "name": "Alex GarcÃ­a",
      "email": "alex.garcia@techcorp.example.com",
      "service": "GitHub Trabajo",
      "icon": "ğŸ’¼",
      "description": "TechCorp empleo principal",
      "sshKeyPath": "~/.ssh/id_ed25519_work",
      "sshHost": "github-work",
      "gpgKeyId": "9876543210FEDCBA"
    },
    {
      "id": "client-a",
      "name": "Alex GarcÃ­a",
      "email": "alex@clienta.example.com",
      "service": "Bitbucket",
      "icon": "ğŸ¢",
      "description": "ClientA contrato",
      "sshKeyPath": "~/.ssh/id_ed25519_clienta",
      "sshHost": "bitbucket-clienta"
    },
    {
      "id": "client-b",
      "name": "A.GarcÃ­a",
      "email": "a.garcia@clientb.example.com",
      "service": "Bitbucket",
      "icon": "ğŸ­",
      "description": "ClientB presencial",
      "sshKeyPath": "~/.ssh/id_ed25519_clientb",
      "sshHost": "bitbucket-clientb"
    },
    {
      "id": "oss",
      "name": "alex-dev",
      "email": "alex.dev@example.com",
      "service": "GitLab",
      "icon": "ğŸŒŸ",
      "description": "Contribuciones OSS",
      "sshKeyPath": "~/.ssh/id_ed25519_oss",
      "sshHost": "gitlab-oss"
    }
  ],
  "gitIdSwitcher.defaultIdentity": "personal",
  "gitIdSwitcher.autoSwitchSshKey": true,
  "gitIdSwitcher.applyToSubmodules": true
}
```

Nota: El 4.Âº perfil (`client-b`) usa un nombre abreviado y el 5.Âº (`oss`) un alias de desarrollador. Puedes establecer nombres de visualizaciÃ³n diferentes para cada perfil, incluso para la misma persona.

---

## GestiÃ³n de perfiles

Haz clic en la barra de estado â†’ selecciona Â«GestiÃ³n de perfilesÂ» en la parte inferior de la lista para abrir la pantalla de gestiÃ³n.
Puedes aÃ±adir, editar, eliminar y reordenar perfiles directamente desde la interfaz.

<img src="https://assets.nullvariant.com/nullvariant-vscode-extensions/extensions/git-id-switcher/images/es/identity-management.webp" width="600" alt="GestiÃ³n de perfiles: guÃ­a de eliminaciÃ³n y reordenaciÃ³n" loading="lazy">

TambiÃ©n puedes eliminar un perfil desde la paleta de comandos con `Git ID Switcher: Delete Identity`.

---

## Comandos

| Comando                                  | DescripciÃ³n                           |
| ---------------------------------------- | ------------------------------------- |
| `Git ID Switcher: Select Identity`       | Abrir el selector de perfiles         |
| `Git ID Switcher: Delete Identity`       | Eliminar un perfil                    |
| `Git ID Switcher: Show Current Identity` | Mostrar informaciÃ³n del perfil actual |
| `Git ID Switcher: Show Documentation`    | Mostrar documentaciÃ³n                 |

---

## Referencia de configuraciÃ³n

### Propiedades del perfil

| Propiedad     | Requerido | DescripciÃ³n                                                                |
| ------------- | --------- | -------------------------------------------------------------------------- |
| `id`          | âœ…        | Identificador Ãºnico (ej.: `"personal"`, `"work"`)                          |
| `name`        | âœ…        | Git user.name â€” se muestra en los commits                                  |
| `email`       | âœ…        | Git user.email â€” se muestra en los commits                                 |
| `icon`        |           | Emoji en la barra de estado (ej.: `"ğŸ "`). Solo un emoji                   |
| `service`     |           | Nombre del servicio (ej.: `"GitHub"`, `"GitLab"`). Se usa para la interfaz |
| `description` |           | DescripciÃ³n breve en el selector y el tooltip                              |
| `sshKeyPath`  |           | Ruta a la clave SSH privada (ej.: `"~/.ssh/id_ed25519_work"`)              |
| `sshHost`     |           | Alias de host SSH (ej.: `"github-work"`)                                   |
| `gpgKeyId`    |           | ID de clave GPG para firmar commits                                        |

#### Limitaciones de visualizaciÃ³n

- **Barra de estado**: El texto que exceda ~25 caracteres se truncarÃ¡ con `...`
- **`icon`**: Solo se permite un emoji (clÃºster de grafemas). No se admiten mÃºltiples emojis ni cadenas largas

### Ajustes globales

| Ajuste                                     | Predeterminado | DescripciÃ³n                                                                                                   |
| ------------------------------------------ | -------------- | ------------------------------------------------------------------------------------------------------------- |
| `gitIdSwitcher.identities`                 | Ver ejemplos   | Lista de configuraciones de perfiles                                                                          |
| `gitIdSwitcher.defaultIdentity`            | Ver ejemplos   | ID del perfil predeterminado                                                                                  |
| `gitIdSwitcher.autoSwitchSshKey`           | `true`         | Cambiar automÃ¡ticamente la clave SSH al cambiar de perfil                                                     |
| `gitIdSwitcher.showNotifications`          | `true`         | Mostrar notificaciones al cambiar de perfil                                                                   |
| `gitIdSwitcher.applyToSubmodules`          | `true`         | Propagar el perfil a los submÃ³dulos Git                                                                       |
| `gitIdSwitcher.submoduleDepth`             | `1`            | Profundidad mÃ¡xima para submÃ³dulos anidados (1-5)                                                             |
| `gitIdSwitcher.includeIconInGitConfig`     | `false`        | Incluir el emoji del icono en `user.name` de Git config                                                       |
| `gitIdSwitcher.logging.fileEnabled`        | `false`        | Guardar registro de auditorÃ­a en archivo (cambios de perfil, operaciones SSH, etc.)                           |
| `gitIdSwitcher.logging.filePath`           | `""`           | Ruta del archivo de registro (ej.: `~/.git-id-switcher/security.log`). VacÃ­o = ubicaciÃ³n predeterminada       |
| `gitIdSwitcher.logging.maxFileSize`        | `10485760`     | TamaÃ±o mÃ¡ximo del archivo antes de rotaciÃ³n (bytes, 1 MBâ€“100 MB)                                              |
| `gitIdSwitcher.logging.maxFiles`           | `5`            | NÃºmero mÃ¡ximo de archivos de registro en rotaciÃ³n (1-20)                                                      |
| `gitIdSwitcher.logging.redactAllSensitive` | `false`        | Cuando estÃ¡ activado, todos los valores se enmascaran en los registros (mÃ¡xima privacidad)                    |
| `gitIdSwitcher.logging.level`              | `"INFO"`       | Nivel de registro (`DEBUG`, `INFO`, `WARN`, `ERROR`, `SECURITY`). Registra el nivel seleccionado y superiores |
| `gitIdSwitcher.commandTimeouts`            | `{}`           | Tiempo de espera personalizado por comando (ms, 1 sâ€“5 min). Ej.: `{"git": 15000, "ssh-add": 10000}`           |

#### Acerca de `includeIconInGitConfig`

Controla el comportamiento cuando el campo `icon` estÃ¡ configurado:

| Valor                    | Comportamiento                                                                         |
| ------------------------ | -------------------------------------------------------------------------------------- |
| `false` (predeterminado) | `icon` solo se muestra en la interfaz del editor. Solo `name` se escribe en Git config |
| `true`                   | `icon + name` se escribe en Git config. El emoji aparece en el historial de commits    |

Ejemplo: `icon: "ğŸ‘¤"`, `name: "Alex GarcÃ­a"`

| includeIconInGitConfig | Git config `user.name` | Firma de commit          |
| ---------------------- | ---------------------- | ------------------------ |
| `false`                | `Alex GarcÃ­a`          | `Alex GarcÃ­a <email>`    |
| `true`                 | `ğŸ‘¤ Alex GarcÃ­a`       | `ğŸ‘¤ Alex GarcÃ­a <email>` |

---

## CÃ³mo funciona

### Estructura de capas de Git config

La configuraciÃ³n de Git tiene tres capas, donde cada capa inferior sobrescribe a la superior:

```text
Sistema (/etc/gitconfig)
    â†“ sobrescribe
Global (~/.gitconfig)
    â†“ sobrescribe
Local (.git/config)  â† mÃ¡xima prioridad
```

**Git ID Switcher escribe en `--local` (local al repositorio).**

Esto significa:

- El perfil se guarda en el `.git/config` de cada repositorio
- Se pueden mantener diferentes perfiles por repositorio
- La configuraciÃ³n global (`~/.gitconfig`) no se modifica

### Comportamiento al cambiar de perfil

Al cambiar de perfil, la extensiÃ³n ejecuta (en orden):

1. **Git Config** (siempre): Establece `git config --local user.name` y `user.email`
2. **Clave SSH** (si `sshKeyPath` estÃ¡ configurado): Elimina otras claves de ssh-agent y aÃ±ade la seleccionada
3. **Clave GPG** (si `gpgKeyId` estÃ¡ configurado): Establece `git config --local user.signingkey` y activa la firma
4. **SubmÃ³dulos** (si estÃ¡ activado): Propaga la configuraciÃ³n a todos los submÃ³dulos (predeterminado: profundidad 1)

### PropagaciÃ³n a submÃ³dulos

La configuraciÃ³n local es por repositorio, por lo que no se aplica automÃ¡ticamente a los submÃ³dulos.
Por eso, esta extensiÃ³n proporciona la funcionalidad de propagaciÃ³n a submÃ³dulos (consulta Â«Avanzado: Soporte de submÃ³dulosÂ» para mÃ¡s detalles).

### GestiÃ³n de claves SSH en detalle

Git ID Switcher gestiona las claves SSH a travÃ©s de `ssh-agent`:

| OperaciÃ³n      | Comando ejecutado      |
| -------------- | ---------------------- |
| AÃ±adir clave   | `ssh-add <keyPath>`    |
| Eliminar clave | `ssh-add -d <keyPath>` |
| Listar claves  | `ssh-add -l`           |

**Importante:** Esta extensiÃ³n **no modifica** `~/.ssh/config`. La configuraciÃ³n SSH debe realizarse manualmente (consulta el paso 2 de Â«Inicio rÃ¡pidoÂ»).

### InteracciÃ³n con la configuraciÃ³n SSH existente

Si ya tienes una configuraciÃ³n SSH, Git ID Switcher funciona en coexistencia:

| Tu configuraciÃ³n                          | Comportamiento de Git ID Switcher                                |
| ----------------------------------------- | ---------------------------------------------------------------- |
| `~/.ssh/config` con `IdentityFile`        | Ambas son utilizables; `IdentitiesOnly yes` evita conflictos     |
| Variable de entorno `GIT_SSH_COMMAND`     | Se usa tu comando SSH personalizado; ssh-agent sigue funcionando |
| `git config core.sshCommand`              | Igual que arriba                                                 |
| direnv con variables relacionadas con SSH | Coexistencia posible; ssh-agent funciona independientemente      |

**Recomendado:** Configura siempre `IdentitiesOnly yes` en tu configuraciÃ³n SSH. Esto evita que SSH intente mÃºltiples claves.

### Â¿Por quÃ© `IdentitiesOnly yes`?

Sin esta configuraciÃ³n, SSH puede intentar las claves en este orden:

1. Claves cargadas en ssh-agent (gestionadas por Git ID Switcher)
2. Claves especificadas en `~/.ssh/config`
3. Claves predeterminadas (`~/.ssh/id_rsa`, `~/.ssh/id_ed25519`, etc.)

Esto puede provocar fallos de autenticaciÃ³n o el uso involuntario de una clave incorrecta.

Con `IdentitiesOnly yes`, SSH utiliza **Ãºnicamente la clave especificada**. Esto garantiza que la clave configurada en Git ID Switcher se use de forma fiable.

```ssh-config
# ConfiguraciÃ³n recomendada
Host github-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519_work
    IdentitiesOnly yes  # â† Esta lÃ­nea es importante
```

Con esta configuraciÃ³n, al conectarse al host `github-work`, solo se utiliza `~/.ssh/id_ed25519_work` y no se intenta ninguna otra clave.

---

## Avanzado: Soporte de submÃ³dulos

En repositorios complejos con submÃ³dulos Git, la gestiÃ³n de perfiles suele ser problemÃ¡tica. Al hacer commit en un submÃ³dulo, Git utiliza la configuraciÃ³n local de ese submÃ³dulo, que puede recurrir a la configuraciÃ³n global (Â¡direcciÃ³n de correo incorrecta!) si no se ha configurado explÃ­citamente.

**Git ID Switcher** detecta automÃ¡ticamente los submÃ³dulos y aplica el perfil seleccionado.

```json
{
  "gitIdSwitcher.applyToSubmodules": true,
  "gitIdSwitcher.submoduleDepth": 1
}
```

- `applyToSubmodules`: Activa/desactiva esta funcionalidad
- `submoduleDepth`: Â¿Hasta quÃ© profundidad aplicar?
  - `1`: Solo submÃ³dulos directos (lo mÃ¡s comÃºn)
  - `2+`: SubmÃ³dulos anidados (submÃ³dulos dentro de submÃ³dulos)

Esto garantiza que tu perfil siempre sea correcto, ya sea que hagas commit en el repositorio principal o en una biblioteca vendor.

---

## SoluciÃ³n de problemas

### Â¿La clave SSH no cambia?

1. AsegÃºrate de que `ssh-agent` estÃ© en ejecuciÃ³n:

   ```bash
   eval "$(ssh-agent -s)"
   ```

2. Verifica que la ruta de la clave sea correcta:

   ```bash
   ls -la ~/.ssh/id_ed25519_*
   ```

3. En macOS, aÃ±Ã¡dela al llavero una vez:

   ```bash
   ssh-add --apple-use-keychain ~/.ssh/id_ed25519_work
   ```

### Â¿Perfil incorrecto al hacer push?

**Al clonar un repositorio nuevo:**

Al clonar repositorios de trabajo, usa el alias de host configurado en SSH config:

```bash
# Trabajo (usa el alias github-work)
git clone git@github-work:company/repo.git

# Personal (usa github.com predeterminado)
git clone git@github.com:yourname/repo.git
```

**Para repositorios existentes:**

1. Verifica que la URL remota use el alias de host correcto:

   ```bash
   git remote -v
   # DeberÃ­a mostrar git@github-work:... para repos de trabajo
   ```

2. Actualiza si es necesario:

   ```bash
   git remote set-url origin git@github-work:company/repo.git
   ```

### Â¿La firma GPG no funciona?

1. Busca tu ID de clave GPG:

   ```bash
   gpg --list-secret-keys --keyid-format SHORT
   ```

2. Prueba la firma:

   ```bash
   echo "test" | gpg --clearsign
   ```

3. AsegÃºrate de que la direcciÃ³n de correo en tu perfil coincida con la de la clave GPG

### Â¿Perfil no detectado?

- AsegÃºrate de estar dentro de un repositorio Git
- Verifica que `settings.json` no tenga errores de sintaxis
- Recarga la ventana de VS Code (`Cmd+Shift+P` â†’ Â«Recargar ventanaÂ»)

### Â¿Error con el campo `name`?

Los siguientes caracteres en el campo `name` causarÃ¡n un error:

`` ` `` `$` `(` `)` `{` `}` `|` `&` `<` `>`

Si quieres incluir informaciÃ³n del servicio, usa el campo `service`.

```jsonc
// NG
"name": "Alex GarcÃ­a (Personal)"

// OK
"name": "Alex GarcÃ­a",
"service": "GitHub"
```

### Â¿Los nuevos ajustes no aparecen?

DespuÃ©s de actualizar la extensiÃ³n, los nuevos ajustes pueden no aparecer en la interfaz de configuraciÃ³n.

**SoluciÃ³n:** Reinicia tu mÃ¡quina completamente.

Los editores basados en VS Code cachean el esquema de configuraciÃ³n en memoria, y Â«Recargar ventanaÂ» o reinstalar la extensiÃ³n puede no ser suficiente para actualizarlo.

### Â¿Los valores predeterminados (identities, etc.) estÃ¡n vacÃ­os?

Si los ajustes de ejemplo no aparecen incluso despuÃ©s de una instalaciÃ³n nueva, **Settings Sync** puede ser la causa.

Si previamente guardaste ajustes vacÃ­os, estos pueden haberse sincronizado a la nube y estar sobrescribiendo los valores predeterminados en nuevas instalaciones.

**SoluciÃ³n:**

1. Busca el ajuste en la interfaz de configuraciÃ³n
2. Haz clic en el icono del engranaje â†’ Â«Restablecer configuraciÃ³nÂ»
3. Sincroniza con Settings Sync (esto elimina los ajustes antiguos de la nube)

---

## FilosofÃ­a de diseÃ±o

> **Cambiar Â«QuiÃ©n soyÂ»** â€” La Ãºnica pregunta que responde esta extensiÃ³n

DiseÃ±ada con la **arquitectura Karesansui**: un nÃºcleo simple (100 lÃ­neas).
Por eso, el resto puede dedicarse a la calidad (90 % de cobertura, registro, timeouts)
y a restricciones deliberadas (sin API de GitHub, sin gestiÃ³n de tokens).

[![Karesansui Architecture](https://img.shields.io/badge/ğŸª¨_Karesansui-Architecture-4a5568)](../../DESIGN_PHILOSOPHY.md)

[Leer la filosofÃ­a completa](../../DESIGN_PHILOSOPHY.md)

---

## Contribuir

Â¡Las contribuciones son bienvenidas! Consulta [CONTRIBUTING.md](../../CONTRIBUTING.md).

## Licencia

Licencia MIT â€” consulta [LICENSE](../../../LICENSE).

## CrÃ©ditos

Creado por [Null;Variant](https://github.com/nullvariant)
