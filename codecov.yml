# Codecov Configuration for Monorepo
# https://docs.codecov.com/docs/codecov-yaml

coverage:
  status:
    project:
      default:
        target: auto
        threshold: 5%
    patch:
      default:
        target: auto

# Fix path mapping for monorepo structure
# lcov.info contains paths like "out/commandAllowlist.js"
# Source files are at "extensions/git-id-switcher/src/commandAllowlist.ts"
fixes:
  - "out/::extensions/git-id-switcher/src/"

# Ignore test files from coverage
ignore:
  - "**/*.test.ts"
  - "**/test/**"
  - "**/out/test/**"
