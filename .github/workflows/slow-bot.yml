# nullvariant-slow[bot] - The laziest contributor
# "åƒããŸããªã„ã§ã”ã–ã‚‹"

name: ğŸ¦¥ Slow Bot

permissions: read-all

on:
  workflow_dispatch:
    inputs:
      message:
        description: 'What should Slow say? (optional)'
        required: false
        default: '...zzz...'

jobs:
  slow-commit:
    name: ğŸ¦¥ Make a lazy commit
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ¦¥ Wake up slowly...
        run: |
          echo "...yawn..."
          sleep 3
          echo "Do I really have to work today?"

      - name: ğŸ”‘ Get App Token
        id: app-token
        uses: tibdex/github-app-token@3beb63f4bd073e61482598c45c71c1019b59b73a # v2
        with:
          app_id: ${{ secrets.SLOW_BOT_APP_ID }}
          private_key: ${{ secrets.SLOW_BOT_PRIVATE_KEY }}

      - name: ğŸ“¥ Checkout (reluctantly)
        uses: actions/checkout@34e114876b0b11c390a56381ad16ebd13914f8d5 # v4
        with:
          token: ${{ steps.app-token.outputs.token }}

      - name: ğŸ“ Leave a lazy message
        run: |
          # Create docs directory and update SLOW.md
          mkdir -p docs
          cat > docs/SLOW.md << EOF
          # ğŸ¦¥ Slow's Corner

          > "Why hurry? The code will still be here tomorrow."

          ## Today's Wisdom

          ${{ github.event.inputs.message }}

          ---

          *Last yawned: $(date -u +"%Y-%m-%d %H:%M:%S UTC")*

          > åƒããŸããªã„ã§ã”ã–ã‚‹
          EOF

      - name: ğŸ“¬ Create PR with verified commit
        uses: peter-evans/create-pull-request@22a9089034f40e5a961c8808d113e2c98fb63676 # v7
        with:
          token: ${{ steps.app-token.outputs.token }}
          sign-commits: true
          author: nullvariant-slow[bot] <2610174+nullvariant-slow[bot]@users.noreply.github.com>
          committer: nullvariant-slow[bot] <2610174+nullvariant-slow[bot]@users.noreply.github.com>
          commit-message: |
            ğŸ¦¥ ...zzz... updated wisdom

            ${{ github.event.inputs.message }}

            *yawn* maybe I'll do more tomorrow...
          branch: slow/wisdom-${{ github.run_number }}
          delete-branch: true
          title: "ğŸ¦¥ Slow's wisdom update"
          body: |
            ## ğŸ¦¥ *yawn*

            ${{ github.event.inputs.message }}

            ---

            > åƒããŸããªã„ã§ã”ã–ã‚‹

            *This PR was reluctantly created by nullvariant-slow[bot]*

      - name: ğŸ˜´ Go back to sleep
        run: |
          echo "That was exhausting."
          echo "Time for a nap... ğŸ’¤"
