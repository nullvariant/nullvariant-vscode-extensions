# nullvariant-blaze[bot] - The hot-headed deployer
# "ã‚ˆã£ã—ã‚ƒï¼ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ãã‚‹ãï¼"

name: ğŸ— Blaze Bot

permissions: read-all

on:
  workflow_dispatch:
    inputs:
      message:
        description: 'What should Blaze shout? (optional)'
        required: false
        default: 'LETS GOOOO!!!'

jobs:
  blaze-commit:
    name: ğŸ— Charge forward!
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ— Get fired up!
        run: |
          echo "ğŸ”¥ğŸ”¥ğŸ”¥ BLAZE IS HERE! ğŸ”¥ğŸ”¥ğŸ”¥"
          echo "No time to waste! Let's DO THIS!"

      - name: ğŸ”‘ Get App Token
        id: app-token
        uses: tibdex/github-app-token@v2
        with:
          app_id: ${{ secrets.BLAZE_BOT_APP_ID }}
          private_key: ${{ secrets.BLAZE_BOT_PRIVATE_KEY }}

      - name: ğŸ“¥ Checkout (FAST!)
        uses: actions/checkout@v4
        with:
          token: ${{ steps.app-token.outputs.token }}

      - name: ğŸ“ Leave a fired-up message
        run: |
          mkdir -p docs
          cat > docs/BLAZE.md << EOF
          # ğŸ— Blaze's Battle Cry

          > "Don't think, just DO IT!"

          ## Today's War Cry

          ${{ github.event.inputs.message }}

          ---

          *Last charged: $(date -u +"%Y-%m-%d %H:%M:%S UTC")*

          > ã‚ˆã£ã—ã‚ƒï¼ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ãã‚‹ãï¼
          EOF

      - name: ğŸ“¬ Create PR with verified commit
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ steps.app-token.outputs.token }}
          sign-commits: true
          author: nullvariant-blaze[bot] <2610768+nullvariant-blaze[bot]@users.noreply.github.com>
          committer: nullvariant-blaze[bot] <2610768+nullvariant-blaze[bot]@users.noreply.github.com>
          commit-message: |
            ğŸ— CHARGE!!! Updated battle cry

            ${{ github.event.inputs.message }}

            NO RETREAT! FULL SPEED AHEAD!
          branch: blaze/charge-${{ github.run_number }}
          delete-branch: true
          title: "ğŸ— Blaze's battle cry update"
          body: |
            ## ğŸ— LETS GOOOO!!!

            ${{ github.event.inputs.message }}

            ---

            > ã‚ˆã£ã—ã‚ƒï¼ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ãã‚‹ãï¼

            *This PR was ENTHUSIASTICALLY created by nullvariant-blaze[bot]*

      - name: ğŸ”¥ Victory roar
        run: |
          echo "MISSION COMPLETE!"
          echo "Who's next?! ğŸ”¥ğŸ”¥ğŸ”¥"
